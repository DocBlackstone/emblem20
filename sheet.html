<html>
<div class="sheet-charinfo">
    <div class = "sheet-header"> INFO</div>
    <div class="sheet-row">
        <label> Character Name:
            <input type = "text" name = "attr_name" />
        </label>

        <div class="gender">
            <label> Gender:
                <input type = "text" name = "attr_gender" />
            </label>
        </div>
        <label> Species:
            <select name = "attr_Species">
                <option selected disabled hidden></option>
                <option>Human</option>
                <option>Manakete</option>
                <option>Half-Manakete</option>
                <option>Kitsune</option>
                <option>Half-Kitsune</option>
                <option>Wolfskin</option>
                <option>Half-Wolfskin</option>
                <option>Laguz</option>
                <option>Half-Laguz</option>
                <option>Monster</option>
                <option>Other</option>
            </select>
        </label>
    </div>
    <div class = "sheet-row">
        <label> Class:
        <!--I'd love to have this change based on the status of the promo checkbox, but I don't think that's possible given that you can't use IDs in Roll20-->
            <select name = "attr_Class">
                <option selected disabled hidden></option>
                <option>Archer</option>
                <option>Apothecary</option>
                <option>Cavalier</option>
                <option>Cleric</option>
                <option>Dark Mage</option>
                <option>Fighter</option>
                <option>Griffin Rider</option>
                <option>Kitsune</option>
                <option>Knight</option>
                <option>Lord</option>
                <option>Anima Mage</option>
                <option>Mercenary</option>
                <option>Light Mage</option>
                <option>Myrmidon</option>
                <option>Ninja</option>
                <option>Pegasus Knight</option>
                <option>Oni Savage</option>
                <option>Soldier</option>
                <option>Thief</option>
                <option>Troubadour</option>
                <option>Villager</option>
                <option>Wolfskin</option>
                <option>Wyvern Rider</option>
                <option>Dancer</option>
                <option>Manakete</option>
                <option>Laguz</option>
                <option>Ballistician</option>
                <option>Dread Fighter</option>
                <option>Lodestar</option>
                <option>Vanguard</option>
                <option>Witch</option>
                <option>Tactician</option>
                <option>Rifleman</option>
                <option disabled>----</option>
                <option>Sniper</option>
                <option>Bow Knight</option>
                <option>Merchant</option>
                <option>Mechanist</option>
                <option>Paladin</option>
                <option>Great Knight</option>
                <option>War Cleric</option>
                <option>Sage</option>
                <option>Valkyrie</option>
                <option>Druid</option>
                <option>Dark Knight</option>
                <option>Warrior</option>
                <option>Hero</option>
                <option>Griffin Lord</option>
                <option>Light Flier</option>
                <option>Ninetails</option>
                <option>General</option>
                <option>Great Lord</option>
                <option>Basara</option>
                <option>Swordmaster</option>
                <option>Assassin</option>
                <option>Master Ninja</option>
                <option>Falcon Knight</option>
                <option>Dark Flier</option>
                <option>Halberdier</option>
                <option>Trickster</option>
                <option>Strategist</option>
                <option>Noble</option>
                <option>Master of Arms</option>
                <option>Wolfssegner</option>
                <option>Managarm</option>
                <option>Great Laguz</option>
                <option>Wyvern Lord</option>
                <option>Revenant Knight</option>
                <option>Grandmaster</option>
                <option>Gunslinger</option>
                <option>Hunter</option>
                <option>Berserker</option>
                <option disabled>----</option>
                <option>Ranger</option>
                <option>Acrobat</option>
                <option>Bonewalker</option>
                <option>Mogall</option>
                <option>Mauthe</option>
                <option>Bael</option>
                <option>Tarvos</option>
                <option>Gargoyle</option>
                <option>Ranger Knight</option>
                <option>Performer</option>
                <option>Wight</option>
                <option>Arch Mogall</option>
                <option>Gwyllgi</option>
                <option>Elder Bael</option>
                <option>Maeduin</option>
                <option>Deathgoyle</option>
            </select>
        </label>
        <label> Level:
            <input type = "number" name = "attr_Level" min = "1"  max = "40" value = "1"/>
        </label>
        <label> EXP:
            <span name="attr_EXP">0</span>
        </label>
        <label>
            Weaknesses:
            <span name ="attr_Weaknesses"></span>
        </label>

    </div>
</div>
<div class = "sheet-checks">
    <div class = "sheet-header">SKILL CHECKS</div>
        <table>
            <tr>
                <th>Name</th>
                <th>Trained?</th>
                <th>Stat</th>
                <th>Total</th>
            </tr>
            <tr>
                <td><span>Athletics (Str)</span></td>
                <td><input type = "checkbox" name ="attr_Athletics_check"/></td>
                <td><span name = "attr_Str_total">0</span></td>
                <td><span name = "attr_Athletics_total">0</span></td>
            </tr>
            <tr>
                <td><span>Arcana (Mag)</span></td>
                <td><input type = "checkbox" name ="attr_Arcana_check"/></td>
                <td><span name = "attr_Mag_total">0</span></td>
                <td><span name = "attr_Arcana_total">0</span></td>
            </tr>
            <tr>
                <td><span>History (Mag)</span></td>
                <td><input type = "checkbox" name ="attr_History_check"/></td>
                <td><span name = "attr_Mag_total">0</span></td>
                <td><span name = "attr_History_total">0</span></td>
            </tr>
            <tr>
            	<td><span>Invest. (Mag)</span></td>
            	<td><input type = "checkbox" name ="attr_Investigation_check"/></td>
            	<td><span name = "attr_Mag_total">0</span></td>
            	<td><span name = "attr_Investigation_total">0</span></td>
        	</tr>
        	<tr>
            	<td><span>Nature (Mag)</span></td>
            	<td><input type = "checkbox" name ="attr_Nature_check"/></td>
            	<td><span name = "attr_Mag_total">0</span></td>
            	<td><span name = "attr_Nature_total">0</span></td>
        	</tr>
        	<tr>
            	<td><span>Religion (Mag)</span></td>
            	<td><input type = "checkbox" name ="attr_Religion_check"/></td>
            	<td><span name = "attr_Mag_total">0</span></td>
            	<td><span name = "attr_Religion_total">0</span></td>
        	</tr>
        	<tr>
            	<td><span>Deception (Skl)</span></td>
            	<td><input type = "checkbox" name ="attr_Deception_check"/></td>
            	<td><span name = "attr_Skl_total">0</span></td>
            	<td><span name = "attr_Deception_total">0</span></td>
        	</tr>
        	<tr>
            	<td><span>Intimid. (Skl)</span></td>
            	<td><input type = "checkbox" name ="attr_Intimidation_check"/></td>
            	<td><span name = "attr_Skl_total">0</span></td>
            	<td><span name = "attr_Intimidation_total">0</span></td>
        	</tr>
        	<tr>
            	<td><span>Performance (Skl)</span></td>
            	<td><input type = "checkbox" name ="attr_Performance_check"/></td>
            	<td><span name = "attr_Skl_total">0</span></td>
            	<td><span name = "attr_Performance_total">0</span></td>
        	</tr>
        	<tr>
            	<td><span>Persuasion (Skl)</span></td>
            	<td><input type = "checkbox" name ="attr_Persuasion_check"/></td>
            	<td><span name = "attr_Skl_total">0</span></td>
            	<td><span name = "attr_Persuasion_total">0</span></td>
        	</tr>
        	<tr>
            	<td><span>Acrobatics (Spd)</span></td>
            	<td><input type = "checkbox" name ="attr_Acrobatics_check"/></td>
            	<td><span name = "attr_Spd_total">0</span></td>
            	<td><span name = "attr_Acrobatics_total">0</span></td>
        	</tr>
        	<tr>
            	<td><span>Sl. of Hand (Spd)</span></td>
            	<td><input type = "checkbox" name ="attr_SleightofHand_check"/></td>
            	<td><span name = "attr_Spd_total">0</span></td>
            	<td><span name = "attr_SleightofHand_total">0</span></td>
        	</tr>
        	<tr>
            	<td><span>Stealth (Spd)</span></td>
            	<td><input type = "checkbox" name ="attr_Stealth_check"/></td>
            	<td><span name = "attr_Spd_total">0</span></td>
            	<td><span name = "attr_Stealth_total">0</span></td>
        	</tr>
        	<tr>
            	<td><span>An. Handling (Res)</span></td>
            	<td><input type = "checkbox" name ="attr_AnimalHandling_check"/></td>
            	<td><span name = "attr_Res_total">0</span></td>
            	<td><span name = "attr_AnimalHandling_total">0</span></td>
        	</tr>
        	<tr>
            	<td><span>Insight (Res)</span></td>
            	<td><input type = "checkbox" name ="attr_Insight_check"/></td>
            	<td><span name = "attr_Res_total">0</span></td>
            	<td><span name = "attr_Insight_total">0</span></td>
        	</tr>
        	<tr>
            	<td><span>Medicine (Res)</span></td>
            	<td><input type = "checkbox" name ="attr_Medicine_check"/></td>
            	<td><span name = "attr_Res_total">0</span></td>
            	<td><span name = "attr_Medicine_total">0</span></td>
        	</tr>
        	<tr>
            	<td><span>Perception (Res)</span></td>
            	<td><input type = "checkbox" name ="attr_Perception_check"/></td>
            	<td><span name = "attr_Res_total">0</span></td>
            	<td><span name = "attr_Perception_total">0</span></td>
        	</tr>
        	<tr>
            	<td><span>Survival (Res)</span></td>
            	<td><input type = "checkbox" name ="attr_Survival_check"/></td>
            	<td><span name = "attr_Res_total">0</span></td>
            	<td><span name = "attr_Survival_total">0</span></td>
        	</tr>
        </table>
</div>

<div class = "sheet-currentvals">
    <div class= sheet-row>
        <table>
            <tr class="sheet-labelrow">
                <th>HP</th>
                <th>Hit</th>
                <th>Crit</th>
                <th>Avo</th>
                <th>Ddg</th>
            </tr>
            <tr>
                <td><span name = "attr_HP_current"></span> / <span name = "attr_HP_current_max"> </span></td>
                <td><span name = "attr_Hit">0</span></td>
                <td><span name = "attr_Crit">0</span></td>
                <td><span name = "attr_Avo">0</span></td>
                <td><span name = "attr_Lck_total"></span></td>
            </tr>
        </table>
    </div>
</div>

<div class="sheet-mainstats">
    <div class = "sheet-header"> ATTRIBUTES</div>
    <table>
        <tr class="sheet-labelrow">
            <th></th>
            <th></th>
            <th class="sheet-statlabel">Stats</th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th>Growths</th>
            <th></th>
            <th></th>
        </tr>
        <tr>
            <th class="sheet-statlabel">Stats</th>
            <th>Class</th>
            <th>Personal</th>
            <th>Buff/Debuff</th>
            <th>Total</th>
            <th class = "sheet-div"> </th>
            <th>Racial</th>
            <th>Class</th>
            <th>Personal</th>
            <th>Total</th>
        </tr>

        <tr class="HP">
            <td class="sheet-statlabel">HP</td>
            <td><span name="attr_HP_sf" value = "0">0</span></td>
            <td><input type= "number" name = "attr_HP_i" value = "0"/></td>
            <td><input type = "number" name = "attr_HP_bd" value = "0"/></td>
            <td><span name="attr_HP_total">0</span></td>
            <td class= "sheet-div"> </td>
            <td><span name = "attr_HP_rg" value = "0">0</span></td>
            <td><span name = "attr_HP_gf" value = "0">0</span> </td>
            <td><input type= "number" name= "attr_HP_gi" value = "0"/></td>
            <td><span name="attr_HP_gtotal">0</span></td>
        </tr>

        <tr class="Str">
            <td class="sheet-statlabel">Str</td>
            <td><span name = "attr_Str_sf" value = "0">0</span></td>
            <td><input name="attr_Str_i" type="number" value = "0"></td>
            <td><input name="attr_Str_bd" type="number" value = "0"></td>
            <td><span name="attr_Str_total">0</span></td>
            <td class="sheet-div"> </td>
            <td><span name = "attr_Str_rg" value = "0">0</span></td>
            <td><span name = "attr_Str_gf" value = "0">0</span></td>
            <td><input name="attr_Str_gi" type="number" value = "0"></td>
            <td><span name="attr_Str_gtotal">0</span></td>
        </tr>

        <tr class="Mag">
            <td class="sheet-statlabel">Mag</td>
            <td><span name = "attr_Mag_sf" value = "0">0</span></td>
            <td><input name="attr_Mag_i" type="number" value = "0"></td>
            <td><input name="attr_Mag_bd" type="number" value = "0"></td>
            <td><span name = "attr_Mag_total">0</span></td>
            <td class="sheet-div"> </td>
            <td><span name = "attr_Mag_rg" value = "0">0</span></td>
            <td><span name = "attr_Mag_gf" value = "0">0</span></td>
            <td><input name="attr_Mag_gi" type="number" value = "0"></td>
            <td><span name="attr_Mag_gtotal">0</span></td>
        </tr>

        <tr class="Skl">
            <td class="sheet-statlabel">Skl</td>
            <td><span name = "attr_Skl_sf" value = "0">0</span></td>
            <td><input name="attr_Skl_i" type="number" value = "0"></td>
            <td><input name="attr_Skl_bd" type="number" value = "0"></td>
            <td><span name = "attr_Skl_total">0</span></td>
            <td class="sheet-div"> </td>
            <td><span name = "attr_Skl_rg" value = "0">0</span></td>
            <td><span name = "attr_Skl_gf" value = "0">0</span></td>
            <td><input name="attr_Skl_gi" type="number" value = "0"></td>
            <td><span name="attr_Skl_gtotal">0</span></td>
        </tr>

        <tr class="Spd">
            <td class="sheet-statlabel">Spd</td>
            <td><span name = "attr_Spd_sf" value = "0">0</span></td>
            <td><input name="attr_Spd_i" type="number" value = "0"></td>
            <td><input name="attr_Spd_bd" type="number" value = "0"></td>
            <td><span name = "attr_Spd_total">0</span></td>
            <td class="sheet-div"> </td>
            <td><span name = "attr_Spd_rg" value = "0">0</span></td>
            <td><span name = "attr_Spd_gf" value = "0">0</span></td>
            <td><input name="attr_Spd_gi" type="number" value = "0"></td>
            <td><span name="attr_Spd_gtotal">0</span></td>
        </tr>

        <tr class="Lck">
            <td class="sheet-statlabel">Lck</td>
            <td><span name = "attr_Lck_sf" value = "0">0</span></td>
            <td><input name="attr_Lck_i" type="number" value = "0"></td>
            <td><input name="attr_Lck_bd" type="number" value = "0"></td>
            <td><span name = "attr_Lck_total">0</span></td>
            <td class="sheet-div"> </td>
            <td><span name = "attr_Lck_rg" value = "0">0</span></td>
            <td><span name = "attr_Lck_gf" value = "0">0</span></td>
            <td><input name="attr_Lck_gi" type="number" value = "0"></td>
            <td><span name="attr_Lck_gtotal">0</span></td>
        </tr>

        <tr class="Def">
            <td class="sheet-statlabel">Def</td>
            <td><span name = "attr_Def_sf" value = "0">0</span></td>
            <td><input name="attr_Def_i" type="number" value = "0"></td>
            <td><input name="attr_Def_bd" type="number" value = "0"></td>
            <td><span name = "attr_Def_total">0</span></td>
            <td class="sheet-div"> </td>
            <td><span name = "attr_Def_rg" value = "0">0</span></td>
            <td><span name = "attr_Def_gf" value = "0">0</span></td>
            <td><input name="attr_Def_gi" type="number" value = "0"></td>
            <td><span name="attr_Def_gtotal">0</span></td>
        </tr>

        <tr class="Res">
            <td class="sheet-statlabel">Res</td>
            <td><span name = "attr_Res_sf" value = "0">0</span></td>
            <td><input name="attr_Res_i" type="number" value = "0"></td>
            <td><input name="attr_Res_bd" type="number" value = "0"></td>
            <td><span name = "attr_Res_total">0</span></td>
            <td class="sheet-div"> </td>
            <td><span name = "attr_Res_rg" value = "0">0</span></td>
            <td><span name = "attr_Res_gf" value = "0">0</span></td>
            <td><input name="attr_Res_gi" type="number" value = "0"></td>
            <td><span name="attr_Res_gtotal">0</span></td>
        </tr>

        <tr class="Mov">
            <td class="sheet-statlabel">Mov</td>
            <td><span name = "attr_Mov_sf" value = "0">0</span></td>
            <td><input name="attr_Mov_i" type="number" value = "0"></td>
            <td><input name="attr_Mov_bd" type="number" value = "0"></td>
            <td><span name = "attr_Mov_total">0</span></td>
            <td class="sheet-div"> </td>
            <td>--</td>
            <td>--</td>
            <td>--</td>
            <td>--</td>
        </tr>
    </table>
</div>
<div class = "sheet-wepprof">
    <div class = "sheet-header">WEAPON RANKS</div>
    <table>
        <tr>
            <th>Weap. Type</th>
            <th>EXP</th>
            <th>Rank</th>
        </tr>
        <input name = "attr_SwordU" value = "1" type = "checkbox" class = "sheet-swordinput hidden" hidden>
        <input name = "attr_LanceU" value = "1" type = "checkbox" class = "sheet-lanceinput hidden" hidden>
        <input name = "attr_AxeU" value = "1" type = "checkbox" class = "sheet-axeinput hidden" hidden>
        <input name = "attr_BowU" value = "1" type = "checkbox" class = "sheet-bowinput hidden" hidden>
        <input name = "attr_DaggerU" value = "1" type = "checkbox" class = "sheet-daggerinput hidden" hidden>
        <input name = "attr_GunU" value = "1" type = "checkbox" class = "sheet-guninput hidden" hidden>
        <input name = "attr_AnimaU" value = "1" type = "checkbox" class = "sheet-animainput hidden" hidden>
        <input name = "attr_LightU" value = "1" type = "checkbox" class = "sheet-lightinput hidden" hidden>
        <input name = "attr_DarkU" value = "1" type = "checkbox" class = "sheet-darkinput hidden" hidden>
        <input name = "attr_StaffU" value = "1" type = "checkbox" class = "sheet-staffinput hidden" hidden>
        <input name = "attr_StoneU" value = "1" type = "checkbox" class = "sheet-stoneinput hidden" hidden>

        <tr class = "sheet-swordsrow">
            <td>Swords/Katanas</td>
            <td><input type = "number" value = "0" name = "attr_SwordEXP" min = "0" max = "255"></td>
            <td><span name = "attr_Swordrank"></span></td>
        </tr>
        <tr class = "sheet-lancesrow">
            <td>Lances/Naginata</td>
            <td><input type = "number" value = "0" name = "attr_LanceEXP" min = "0" max = "255"></td>
            <td><span name = "attr_Lancerank"></span></td>
        </tr>
        <tr class = "sheet-axesrow">
            <td>Axes/Clubs</td>
            <td><input type = "number" value = "0" name = "attr_AxeEXP" min = "0" max = "255"></td>
            <td><span name = "attr_Axerank"></span></td>
        </tr>
        <tr class = "sheet-bowsrow">
            <td>Bows/Yumi</td>
            <td><input type = "number" value = "0" name = "attr_BowEXP" min = "0" max = "255"></td>
            <td><span name = "attr_Bowrank"></span></td>
        </tr>
        <tr class = "sheet-daggersrow">
            <td>Daggers/Shuriken</td>
            <td><input type = "number" value = "0" name = "attr_DaggerEXP" min = "0" max = "255"></td>
            <td><span name = "attr_Daggerrank"></span></td>
        </tr>
        <tr class = "sheet-gunsrow">
            <td>Firearms/Tanegashima</td>
            <td><input type = "number" value = "0" name = "attr_GunEXP" min = "0" max = "255"></td>
            <td><span name = "attr_Gunrank"></span></td>
        </tr>
        <tr class = "sheet-animarow">
            <td>Anima Tomes/Scrolls</td>
            <td><input type = "number" value = "0" name = "attr_AnimaEXP" min = "0" max = "255"></td>
            <td><span name = "attr_Animarank"></span></td>
        </tr>
        <tr class = "sheet-lightrow">
            <td>Light Tomes/Scrolls</td>
            <td><input type = "number" value = "0" name = "attr_LightEXP" min = "0" max = "255"></td>
            <td><span name = "attr_Lightrank"></span></td>
        </tr>
        <tr class = "sheet-darkrow">
            <td>Dark Tomes/Scrolls</td>
            <td><input type = "number" value = "0" name = "attr_DarkEXP" min = "0" max = "255"></td>
            <td><span name = "attr_Darkrank"></span></td>
        </tr>
        <tr class = "sheet-stonesrow">
            <td>Stones/Other</td>
            <td><input type = "number" value = "0" name = "attr_StoneEXP" min = "0" max = "255"></td>
            <td><span name = "attr_Stonerank"></span></td>
        </tr>
        <tr class = "sheet-stavesrow">
            <td>Staves/Rods</td>
            <td><input type = "number" value = "0" name = "attr_StaffEXP" min = "0" max = "255"></td>
            <td><span name = "attr_Staffrank"></span></td>
        </tr>

    </table>
</div>
<div class = "sheet-inventory">
    <div class = "sheet-header">INVENTORY</div>
    <table>
        <tr>
            <th>Name</th>
            <th>Uses</th>
        </tr>
            <tr>
                <td><select name = "attr_item_name0">
                    <option selected disabled hidden> </option>
                    <option>Vulnerary</option>
                    <option>Concoction</option>
                    <option>Elixir</option>
                    <option>Hearty Cheese</option>
                    <option>Spicy Chicken</option>
                    <option>Sweet Honey</option>
                    <option>Fresh Bread</option>
                    <option>Exotic Spice</option>
                    <option>Candy Die</option>
                    <option>Hot Soup</option>
                    <option>Pure Water</option>
                    <option>Fruit of Life</option>
                    <option>Soma</option>
                    <option>Golden Apple</option>
                    <option>Nethergranate</option>
                    <option>Pegasus Cheese</option>
                    <option>Nectar</option>
                    <option>Ambrosia</option>
                    <option>Talisman</option>
                    <option>Orion's Bolt</option>
                    <option>Hero Crest</option>
                    <option>Knight Crest</option>
                    <option>Elysian Whip</option>
                    <option>Guiding Ring</option>
                    <option>Beastly Claw</option>
                    <option>Ocean Seal</option>
                    <option>Medal of Honor</option>
                    <option>Heart Seal</option>
                    <option>Chest Key</option>
                    <option>Door Key</option>
                    <option>Lockpick</option>
                    <option>Red Gem</option>
                    <option>Blue Gem</option>
                    <option>White Gem</option>
                </select></td>
                <td><input name = "attr_item_uses0" type = "number" min = "0" value = "0"></td>
            </tr>
            <tr>
                <td><select name = "attr_item_name1">
                    <option selected disabled hidden> </option>
                    <option>Vulnerary</option>
                    <option>Concoction</option>
                    <option>Elixir</option>
                    <option>Hearty Cheese</option>
                    <option>Spicy Chicken</option>
                    <option>Sweet Honey</option>
                    <option>Fresh Bread</option>
                    <option>Exotic Spice</option>
                    <option>Candy Die</option>
                    <option>Hot Soup</option>
                    <option>Pure Water</option>
                    <option>Fruit of Life</option>
                    <option>Soma</option>
                    <option>Golden Apple</option>
                    <option>Nethergranate</option>
                    <option>Pegasus Cheese</option>
                    <option>Nectar</option>
                    <option>Ambrosia</option>
                    <option>Talisman</option>
                    <option>Orion's Bolt</option>
                    <option>Hero Crest</option>
                    <option>Knight Crest</option>
                    <option>Elysian Whip</option>
                    <option>Guiding Ring</option>
                    <option>Beastly Claw</option>
                    <option>Ocean Seal</option>
                    <option>Medal of Honor</option>
                    <option>Heart Seal</option>
                    <option>Chest Key</option>
                    <option>Door Key</option>
                    <option>Lockpick</option>
                    <option>Red Gem</option>
                    <option>Blue Gem</option>
                    <option>White Gem</option>
                </select></td>
                <td><input name = "attr_item_uses1" type = "number" min = "0" value = "0"></td>
            </tr>
            <tr>
                <td><select name = "attr_item_name2">
                    <option selected disabled hidden> </option>
                    <option>Vulnerary</option>
                    <option>Concoction</option>
                    <option>Elixir</option>
                    <option>Hearty Cheese</option>
                    <option>Spicy Chicken</option>
                    <option>Sweet Honey</option>
                    <option>Fresh Bread</option>
                    <option>Exotic Spice</option>
                    <option>Candy Die</option>
                    <option>Hot Soup</option>
                    <option>Pure Water</option>
                    <option>Fruit of Life</option>
                    <option>Soma</option>
                    <option>Golden Apple</option>
                    <option>Nethergranate</option>
                    <option>Pegasus Cheese</option>
                    <option>Nectar</option>
                    <option>Ambrosia</option>
                    <option>Talisman</option>
                    <option>Orion's Bolt</option>
                    <option>Hero Crest</option>
                    <option>Knight Crest</option>
                    <option>Elysian Whip</option>
                    <option>Guiding Ring</option>
                    <option>Beastly Claw</option>
                    <option>Ocean Seal</option>
                    <option>Medal of Honor</option>
                    <option>Heart Seal</option>
                    <option>Chest Key</option>
                    <option>Door Key</option>
                    <option>Lockpick</option>
                    <option>Red Gem</option>
                    <option>Blue Gem</option>
                    <option>White Gem</option>
                </select></td>
                <td><input name = "attr_item_uses2" type = "number" min = "0" value = "0"></td>
            </tr>
    </table>
</div>

<div class = "sheet-weapons">
    <div class = "sheet-header">WEAPONS</div>
    <fieldset class = "repeating_weapons">
        <table>
            <tr>
                <th>Weapon Name</th>
                <th>Type</th>
            </tr>
            <tr class = "sheet-thicc">
                <td><input name = "attr_WName" type = "text"></td>
                <td>
                    <select name = "attr_WType">
                        <option>Sword/Katana</option>
                        <option>Lance/Nagin.</option>
                        <option>Axe/Club</option>
                        <option>Bow/Yumi</option>
                        <option>Dagger/Shurik.</option>
                        <option>Firearm/Taneg.</option>
                        <option>Anima Magic</option>
                        <option>Light Magic</option>
                        <option>Dark Magic</option>
                        <option>Stones/Other</option>
                        <option>Staves/Rods</option>
                    </select>
                </td>
            </tr>
        </table>
        <table>
            <tr>
                <th>Rank</th>
                <th>Weight</th>
                <th>Uses</th>
            </tr>
            <tr>
                <td>
                    <select name = "attr_WRank">
                        <option>E</option>
                        <option>D</option>
                        <option>C</option>
                        <option>B</option>
                        <option>A</option>
                        <option>S</option>
                        <option>UU</option>
                    </select>
                </td>
                <td><input type = "number" name = "attr_Wt" value = "0"/></td>
                <td><input type = "number" name = "attr_Uses" value = "1" min = "0"/></td>
            </tr>
        </table>
        <table>
            <tr>
                <th>Might</th>
                <th>Hit</th>
                <th>Crit</th>
                <th>Range</th>
            </tr>
            <tr>
                <td><input type = "number" name = "attr_Mt" value = "0"/></td>
                <td><input type = "number" name = "attr_Hit" value = "0"/></td>
                <td><input type = "number" name = "attr_Crit" value = "0"/></td>
                <td><input type = "number" name = "attr_Range1" value = "0" class = "sheet-range"/><input type = "number" name = "attr_Range2" value = "0" class = "sheet-range"/></td>
            </tr>
        </table>
        <label>
            Strong against:
            <select class = "sheet-strengths" name = "attr_Strengths">
                <option> </option>
                <option>Beast</option>
                <option>Flier</option>
                <option>Dragon</option>
                <option>Armor</option>
                <option>Beast, Flier</option>
                <option>Beast, Armor</option>
                <option>Beast, Dragon</option>
                <option>Dragon, Flier</option>
                <option>Dragon, Armor</option>
                <option>Armor, Flier</option>
            </select>
        </label>
    </fieldset>
</div>

<!--The section of the ~forbidden~ inputs. This should always go last.-->
<div class = "hidden">
    <input name="attr_HP_sf" value = "0" hidden>
    <input name="attr_HP_total" value = "0" hidden>
    <input name="attr_HP_rg" value = "0" hidden>
    <input name="attr_HP_gf" value = "0" hidden>
    <input name="attr_HP_gtotal" value = "0" hidden>
    <input name="attr_HP_total_max" value = "0" hidden>
    <input name="attr_HP_current" value = "0" hidden>
    <input name="attr_HP_current_max" value = "0" hidden>
    <input name="attr_Str_sf" value = "0" hidden>
    <input name="attr_Str_total" value = "0" hidden>
    <input name="attr_Str_rg" value = "0" hidden>
    <input name="attr_Str_gf" value = "0" hidden>
    <input name="attr_Str_gtotal" value = "0" hidden>
    <input name="attr_Str_total_max" value = "0" hidden>
    <input name="attr_Mag_sf" value = "0" hidden>
    <input name="attr_Mag_total" value = "0" hidden>
    <input name="attr_Mag_rg" value = "0" hidden>
    <input name="attr_Mag_gf" value = "0" hidden>
    <input name="attr_Mag_gtotal" value = "0" hidden>
    <input name="attr_Mag_total_max" value = "0" hidden>
    <input name="attr_Skl_sf" value = "0" hidden>
    <input name="attr_Skl_total" value = "0" hidden>
    <input name="attr_Skl_rg" value = "0" hidden>
    <input name="attr_Skl_gf" value = "0" hidden>
    <input name="attr_Skl_gtotal" value = "0" hidden>
    <input name="attr_Skl_total_max" value = "0" hidden>
    <input name="attr_Spd_sf" value = "0" hidden>
    <input name="attr_Spd_total" value = "0" hidden>
    <input name="attr_Spd_rg" value = "0" hidden>
    <input name="attr_Spd_gf" value = "0" hidden>
    <input name="attr_Spd_gtotal" value = "0" hidden>
    <input name="attr_Spd_total_max" value = "0" hidden>
    <input name="attr_Lck_sf" value = "0" hidden>
    <input name="attr_Lck_total" value = "0" hidden>
    <input name="attr_Lck_rg" value = "0" hidden>
    <input name="attr_Lck_gf" value = "0" hidden>
    <input name="attr_Lck_gtotal" value = "0" hidden>
    <input name="attr_Lck_total_max" value = "0" hidden>
    <input name="attr_Def_sf" value = "0" hidden>
    <input name="attr_Def_total" value = "0" hidden>
    <input name="attr_Def_rg" value = "0" hidden>
    <input name="attr_Def_gf" value = "0" hidden>
    <input name="attr_Def_gtotal" value = "0" hidden>
    <input name="attr_Def_total_max" value = "0" hidden>
    <input name="attr_Res_sf" value = "0" hidden>
    <input name="attr_Res_total" value = "0" hidden>
    <input name="attr_Res_rg" value = "0" hidden>
    <input name="attr_Res_gf" value = "0" hidden>
    <input name="attr_Res_gtotal" value = "0" hidden>
    <input name="attr_Res_total_max" value = "0" hidden>
    <input name="attr_Mov_sf" value = "0" hidden>
    <input name="attr_Mov_total" value = "0" hidden>
    <input name="attr_Mov_total_max" value = "0" hidden>
    <input name="attr_Athletics_total" value = "0" hidden>
    <input name="attr_Arcana_total" value = "0" hidden>
    <input name="attr_History_total" value = "0" hidden>
    <input name="attr_Investigation_total" value = "0" hidden>
    <input name="attr_Nature_total" value = "0" hidden>
    <input name="attr_Religion_total" value = "0" hidden>
    <input name="attr_Deception_total" value = "0" hidden>
    <input name="attr_Intimidation_total" value = "0" hidden>
    <input name="attr_Performance_total" value = "0" hidden>
    <input name="attr_Persuasion_total" value = "0" hidden>
    <input name="attr_Acrobatics_total" value = "0" hidden>
    <input name="attr_SleightofHand_total" value = "0" hidden>
    <input name="attr_Stealth_total" value = "0" hidden>
    <input name="attr_AnimalHandling_total" value = "0" hidden>
    <input name="attr_Insight_total" value = "0" hidden>
    <input name="attr_Medicine_total" value = "0" hidden>
    <input name="attr_Perception_total" value = "0" hidden>
    <input name="attr_Survival_total" value = "0" hidden>
    <input name="attr_EXP" value = "0" min = "0" max = "100" hidden>
    <input name="attr_Swordrank" value = "E" type = "text" hidden>
    <input name="attr_Lancerank" value = "E" type = "text" hidden>
    <input name="attr_Axerank" value = "E" type = "text" hidden>
    <input name="attr_Bowrank" value = "E" type = "text" hidden>
    <input name="attr_Daggerrank" value = "E" type = "text" hidden>
    <input name="attr_Gunrank" value = "E" type = "text" hidden>
    <input name="attr_Darkrank" value = "E" type = "text" hidden>
    <input name="attr_Lightrank" value = "E" type = "text" hidden>
    <input name="attr_Animarank" value = "E" type = "text" hidden>
    <input name="attr_Stonerank" value = "E" type = "text" hidden>
    <input name="attr_Staffrank" value = "E" type = "text" hidden>
    <input name="attr_Swordrank" value = "E" type = "text" hidden>
    <input name="attr_Lancerank_max" value = "E" type = "text" hidden>
    <input name="attr_Axerank_max" value = "E" type = "text" hidden>
    <input name="attr_Bowrank_max" value = "E" type = "text" hidden>
    <input name="attr_Daggerrank_max" value = "E" type = "text" hidden>
    <input name="attr_Gunrank_max" value = "E" type = "text" hidden>
    <input name="attr_Darkrank_max" value = "E" type = "text" hidden>
    <input name="attr_Lightrank_max" value = "E" type = "text" hidden>
    <input name="attr_Animarank_max" value = "E" type = "text" hidden>
    <input name="attr_Stonerank_max" value = "E" type = "text" hidden>
    <input name="attr_Staffrank_max" value = "E" type = "text" hidden>
    <input name="attr_Hit" value = "0" hidden>
    <input name="attr_Crit" value = "0" hidden>
    <input name="attr_Avo" value = "0" hidden>
    <!--Firstmost weapon values, excludes hit/crit because that's already calculated-->
    <input name= "attr_f_WName" value = "" hidden>
    <input name= "attr_f_WType" value = "0\" hidden>
    <input name= "attr_f_Wt" value = "0" hidden>
    <input name= "attr_f_Mt" value = "0" hidden>
    <input name= "attr_f_Range1" value = "0" hidden>
    <input name= "attr_f_Range2" value = "0" hidden>
    <input name= "attr_f_WName" value = "0" hidden>
    <input name= "attr_f_Strengths" value = "" hidden>
    <input name= "attr_f_Uses" value = "0" hidden>
    <input name= "attr_Weaknesses" value = "" hidden>
   <input type = "checkbox" value="1" name = "attr_isPromo"/>
   <input name= "attr_fid" value = "" hidden>
   <input name = "attr_f_WRank" value = "" hidden>
</div>


<script type="text/worker">
//AAAAA
var getSectionIDsOrdered = function (sectionName, callback) {
  'use strict';
  getAttrs([`_reporder_${sectionName}`], function (v) {
    getSectionIDs(sectionName, function (idArray) {
      let reporderArray = v[`_reporder_${sectionName}`] ? v[`_reporder_${sectionName}`].toLowerCase().split(',') : [],
        ids = [...new Set(reporderArray.filter(x => idArray.includes(x)).concat(idArray))];
      callback(ids);
    });
  });
};

const unPr_classList = ["Archer","Apothecary","Cavalier","Cleric","Dark Mage","Fighter","Griffin Rider","Kitsune","Knight","Lord","Anima Mage","Mercenary","Light Mage","Myrmidon","Ninja","Pegasus Knight","Oni Savage","Soldier","Thief","Troubadour","Villager","Wolfskin","Wyvern Rider","Dancer","Manakete","Laguz","Ballistician","Dread Fighter","Lodestar","Vanguard","Witch","Tactician","Rifleman"];
const Pr_classList = ["Sniper","Bow Knight","Merchant","Mechanist","Paladin","Great Knight","War Cleric","Sage","Druid","Dark Knight","Warrior","Hero","Griffin Lord","Light Flier","Ninetails","General","Great Lord","Basara","Swordmaster","Assassin","Master Ninja","Falcon Knight","Dark Flier","Halberdier","Trickster","Strategist","Noble","Master of Arms","Wolfssegner","Managarm","Great Laguz","Wyvern Lord","Revenant Knight","Grandmaster","Gunslinger","Hunter","Berserker","Valkyrie"];
//Class alt names and custom classes
const Laguz_alt = ["Bonewalker","Mogall","Mauthe","Bael","Tarvos","Gargoyle"];
const GLaguz_alt = ["Wight","Arch Mogall","Gwyllgi","Elder Bael","Maeduin","Deathgoyle"];
//Unpromoted Class Bases
const unPr_HP_b =  [17,18,17,16,17,19,17,16,18,18,15,17,15,16,16,18,18,17,16,15,17,19,19,16,18,18,18,22,19,21,17,16,18];
const unPr_Str_b = [5,6,6,0,0,7,6,5,8,6,0,5,0,4,3,6,6,6,3,0,5,8,7,3,2,2,10,8,7,10,0,4,0];
const unPr_Mag_b = [0,0,0,4,7,0,0,1,0,0,4,0,3,1,0,1,1,0,0,3,0,0,0,2,0,0,0,4,0,0,10,3,0];
const unPr_Skl_b = [7,0,0,3,3,6,10,6,4,5,5,7,4,9,8,7,2,6,6,7,4,4,6,6,1,4,7,7,10,6,5,5,6];
const unPr_Spd_b = [5,4,5,6,1,6,9,8,2,7,6,6,9,10,8,10,5,6,8,5,5,6,5,5,1,5,2,9,9,7,9,5,4];
const unPr_Lck_b = [2,2,3,4,1,2,2,4,0,0,1,2,5,0,1,5,0,2,0,4,3,0,0,3,0,0,4,0,7,3,3,0,2];
const unPr_Def_b = [4,6,3,1,3,4,5,1,11,7,1,5,1,4,3,4,7,5,2,1,4,4,8,2,2,3,3,7,7,9,4,5,6];
const unPr_Res_b = [1,2,3,6,7,1,4,4,0,0,3,2,4,1,3,9,1,2,0,4,0,0,0,3,2,2,1,10,2,1,5,3,2];
const unPr_Mov_b = [5,5,7,5,5,5,7,5,4,5,5,5,5,5,5,7,5,5,6,7,5,5,7,5,6,6,4,6,6,6,6,5,5];
//Unpromoted Class Growths
const unPr_HP_g =  [45,45,45,35,50,45,40,40,50,40,35,45,35,40,35,40,40,45,35,35,35,50,45,35,50,45,40,40,40,45,40,40,45];
const unPr_Str_g = [15,20,15,5,5,25,15,10,25,20,0,20,0,20,5,10,20,15,15,0,10,20,30,10,20,20,25,20,10,20,0,15,0];
const unPr_Mag_g = [0,0,0,15,20,0,0,0,0,0,20,0,15,0,0,0,10,0,5,10,0,0,0,0,5,0,0,10,0,0,25,15,0];
const unPr_Skl_g = [30,10,15,0,10,20,25,15,15,20,20,25,25,15,20,15,0,15,25,20,10,5,15,20,20,15,15,20,20,5,5,15,15];
const unPr_Spd_g = [15,10,15,15,5,25,25,20,10,20,20,20,25,25,20,20,10,15,25,10,10,15,15,20,20,15,0,20,10,5,20,15,5];
const unPr_Lck_g = [5,5,15,15,0,0,10,10,0,0,0,0,5,15,0,20,0,5,0,15,20,5,0,20,0,0,10,0,25,10,5,0,10];
const unPr_Def_g = [10,10,10,0,10,10,10,0,15,10,5,10,0,5,5,0,20,10,5,0,10,10,10,0,15,15,5,10,5,15,0,10,20];
const unPr_Res_g = [5,5,5,20,20,5,5,20,5,5,10,5,10,5,15,20,0,5,5,15,5,0,5,0,15,15,5,10,5,0,10,10,5];
//Unpromoted Class Caps
const unPr_HP_c =  [60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60,60];
const unPr_Str_c = [26,29,26,22,20,29,24,25,30,26,20,26,20,24,22,24,29,27,22,19,20,29,28,30,40,35,44,42,41,50,30,25,20];
const unPr_Mag_c = [20,20,20,25,27,20,23,23,20,20,28,20,25,22,20,23,24,20,20,26,20,20,20,30,35,30,30,38,30,30,41,25,20];
const unPr_Skl_c = [29,24,25,24,25,26,28,28,26,27,27,28,27,27,30,28,21,28,30,24,20,23,24,40,35,40,36,40,43,36,32,25,28];
const unPr_Spd_c = [25,24,25,25,25,25,27,29,23,29,26,26,26,28,30,27,25,27,28,26,20,27,24,40,35,40,30,41,43,37,39,25,27];
const unPr_Lck_c = [30,26,30,40,30,30,30,30,30,31,30,30,30,30,23,30,22,26,30,30,30,22,30,45,45,45,45,45,45,45,45,30,26];
const unPr_Def_c = [25,28,26,22,25,25,22,23,30,21,21,25,21,22,24,22,28,28,21,20,20,26,28,30,40,35,32,39,41,44,31,25,28];
const unPr_Res_c = [21,25,26,27,27,23,25,28,22,21,25,23,25,24,25,25,23,27,20,28,20,21,20,30,40,30,31,43,40,32,34,25,27];
const unPr_Mov_c = [7,7,9,7,7,7,9,7,6,7,7,7,7,7,7,9,7,7,7,9,7,7,9,7,8,8,5,8,8,8,8,7,7];
//Unpromoted Class Weapons; 1:sword, 2:lance, 3:axe, 4:bow, 5:dagger, 6:firearm, 7:anima, 8:light, 9:dark, 10:stone, 11:staff
const unPr_Weps = ["4","4","1 2","11","9","3","1","10","2","1","7","1","8","1","5","2","3","2","5","11","2","10","3","11","10","10","4","1 2 5","1","1 3","9","1 7","6"];
//Unpromoted Weapon Caps- in the same weapon order as listed above
const unPr_Weps_c = ["B","B","B B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","B","A","B","B","B","A B B","S","A B","S","B B","B"];

//Promoted Class Bases
const Pr_HP_b =  [20,24,20,18,19,26,24,20,23,19,28,22,22,17,19,28,23,20,20,21,17,18,17,18,19,19,18,20,22,19,20,24,18,20,19,18,30,19];
const Pr_Str_b = [7,8,8,7,8,11,5,1,2,6,12,8,8,7,6,12,10,7,7,8,5,5,4,9,4,0,4,8,11,4,4,11,7,7,0,0,13,0];
const Pr_Mag_b = [1,0,0,0,1,0,5,7,9,8,0,1,0,6,2,0,0,5,2,0,0,4,7,0,4,5,5,0,0,0,0,0,6,6,0,6,0,5];
const Pr_Skl_b = [12,10,10,6,9,7,6,4,4,5,6,8,11,11,10,9,7,7,7,11,13,10,6,5,8,10,4,9,6,6,3,6,8,6,7,7,8,5,4];
const Pr_Spd_b = [9,10,5,7,7,5,6,7,4,5,7,10,10,9,10,4,9,7,13,12,11,10,9,8,11,8,8,9,7,3,7,7,5,8,7,11,8];
const Pr_Lck_b = [0,0,4,2,4,0,0,0,0,3,0,0,0,3,5,0,0,5,0,0,2,5,4,3,0,0,4,3,1,2,2,0,0,0,4,4,0,0];
const Pr_Def_b = [10,6,8,6,7,14,6,4,7,7,7,8,7,4,2,15,10,7,6,5,4,5,3,7,3,3,5,7,7,4,5,11,8,7,7,8,10,3];
const Pr_Res_b = [3,2,5,6,6,1,6,5,0,8,3,3,3,8,8,3,3,6,4,1,8,9,9,3,5,8,4,3,1,4,3,3,6,5,6,6,1,8];
const Pr_Mov_b = [6,8,6,7,8,7,6,6,6,8,6,6,8,8,6,5,6,6,6,6,6,8,8,6,6,8,6,6,6,7,7,8,8,6,6,6,6,8];
//Promoted Class Growths
const Pr_HP_g =  [45,50,50,40,45,50,45,35,45,50,45,45,40,40,40,50,40,40,40,40,45,40,40,45,35,35,40,50,50,50,45,45,40,40,45,45,50,35];
const Pr_Str_g = [15,20,20,10,15,20,15,0,0,15,25,25,15,15,10,20,15,10,20,20,5,10,10,15,10,0,10,15,20,20,20,30,15,15,0,0,25,0];
const Pr_Mag_g = [0,0,0,0,0,0,15,20,20,15,0,0,0,15,0,0,0,10,0,0,0,10,15,0,15,15,10,0,0,5,0,0,15,15,0,15,0,20];
const Pr_Skl_g = [30,25,10,15,10,15,10,15,15,15,20,20,25,20,15,15,10,10,25,30,20,10,5,15,25,5,15,10,5,20,15,15,10,15,15,15,15,10];
const Pr_Spd_g = [15,20,5,10,10,0,15,20,5,10,15,20,25,20,20,0,10,10,25,35,20,15,20,15,20,10,15,10,15,20,15,15,5,15,20,15,20,20];
const Pr_Lck_g = [0,0,15,5,15,10,5,0,0,0,0,0,0,5,10,10,15,15,0,0,0,20,15,5,0,20,10,10,5,0,0,0,0,0,10,5,0,0];
const Pr_Def_g = [15,5,10,5,10,20,10,10,10,10,20,5,15,10,0,20,10,5,5,5,5,0,0,10,5,0,5,10,10,15,15,10,10,10,15,5,25,5];
const Pr_Res_g = [5,5,5,15,10,5,10,15,20,10,5,5,10,15,20,5,5,10,10,5,20,20,20,5,10,15,10,0,0,15,15,5,15,10,15,15,5,15];
//Promoted Class Caps
const Pr_HP_c =  [80,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80];
const Pr_Str_c = [41,40,48,40,42,48,40,30,30,38,48,42,40,36,39,50,43,41,38,40,34,38,36,46,30,30,38,45,50,40,35,46,43,40,33,33,50,30];
const Pr_Mag_c = [30,30,30,30,30,20,40,46,48,41,30,30,30,42,34,30,30,40,34,30,30,35,42,30,38,42,41,30,30,35,30,30,42,40,30,43,30,42];
const Pr_Skl_c = [48,43,39,45,40,34,38,43,40,40,42,46,43,41,45,41,40,40,44,30,50,45,41,45,45,38,45,40,36,35,40,38,38,40,39,35,35,38];
const Pr_Spd_c = [40,41,35,40,40,37,41,42,38,40,40,42,41,42,49,35,41,41,46,46,50,44,42,44,43,43,45,40,43,35,40,38,34,40,40,44,44,43];
const Pr_Lck_c = [45,45,45,45,45,45,45,45,44,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45,45];
const Pr_Def_c = [40,35,43,38,42,48,38,31,41,42,40,40,40,32,32,50,42,37,33,31,33,33,41,40,30,30,36,41,42,40,35,46,41,40,43,36,34,30];
const Pr_Res_c = [30,30,37,43,42,30,43,40,45,38,35,36,30,41,49,35,40,42,38,30,49,40,40,36,40,45,39,33,31,40,30,30,43,40,33,44,30,45];
const Pr_Mov_c = [8,10,8,9,10,9,8,8,8,10,8,8,10,10,8,7,8,8,8,8,8,10,10,8,8,10,8,8,8,9,9,10,10,8,8,8,8,10];
//Promoted class weapons, same as above
const Pr_Weps = ["4","1 4","2 4","4 5","1 2","1 2 3","3 11", "7 11","8 9","1 9","3 4","1 3","1 3","8 1","10","2 3","1 2","2 7","1","4 5","1 5", "1 2","2 9","2","5 11","8 11","4 11","1 2 3","10","10","10","2 3","3 7","1 7","6","6 8","3","8 11"];
//Promoted weapon caps, same as above
const Pr_Weps_c = ["S","A B","A B","A B","A A","A B B","A S","A A","A S","A B","A A","A B","A B","A B","S","A B","A B","A B","S","B S","B S","A B","A A","S","A B","A B","B A","A B B","S","S","S","A B","A B","A A","S","A A","S","A B"];

let classIndex = 0;
let classType = "";
let weps;
let wepcaps;
let attrs;

//racial growths
const r_names = ["Human","Manakete","Half-Manakete","Kitsune","Half-Kitsune","Wolfskin","Half-Wolfskin","Laguz","Half-Laguz","Monster","Other"];
const r_HP_g = [0,20,20,0,0,25,25,15,15,15,0];
const r_Str_g = [0,10,10,10,10,20,20,10,10,10,0];
const r_Mag_g = [0,-10,-10,-15,-15,-20,-20,-10,-10,-10,0];
const r_Skl_g = [0,-10,-10,0,0,-5,-5,10,10,10,0];
const r_Spd_g = [0,-10,-10,10,10,0,0,10,10,10,0];
const r_Lck_g = [0,20,20,20,20,0,0,0,0,0,0];
const r_Def_g = [0,10,10,-10,-10,10,10,0,0,0,0];
const r_Res_g = [0,0,0,10,10,-5,-5,-10,-10,-10,0];

on("change:Class", function(eventInfo) {
    //Actual code
    let currentclass = eventInfo.newValue;
    if (unPr_classList.indexOf(currentclass) != -1) {
        classIndex = unPr_classList.indexOf(currentclass);
        classType = "unpr";
    } else if (currentclass == "Ranger"){
        classIndex = 9;
        classType = "unpr";
    } else if (currentclass == "Acrobat"){
        classIndex = 14;
        classType = "unpr";
    } else if (Pr_classList.indexOf(currentclass) != -1){
        classIndex = Pr_classList.indexOf(currentclass);
        classType = "pr";
    } else if (currentclass == "Ranger Knight"){
        classIndex = 16;
        classType = "pr";
    } else if (currentclass == "Performer"){
        classIndex = 20;
    } else if (GLaguz_alt.includes(currentclass)){
        classIndex = 30;
    }
    if (classType == "unpr"){
        attrs = {};
        attrs.HP_sf = unPr_HP_b[classIndex];
        attrs.HP_gf = unPr_HP_g[classIndex];
        attrs.HP_total_max = unPr_HP_c[classIndex];
        attrs.Str_sf = unPr_Str_b[classIndex];
        attrs.Str_gf = unPr_Str_g[classIndex];
        attrs.Str_total_max = unPr_Str_c[classIndex];
        attrs.Mag_sf = unPr_Mag_b[classIndex];
        attrs.Mag_gf = unPr_Mag_g[classIndex];
        attrs.Mag_total_max = unPr_Mag_c[classIndex];
        attrs.Skl_sf = unPr_Skl_b[classIndex];
        attrs.Skl_gf = unPr_Skl_g[classIndex];
        attrs.Skl_total_max = unPr_Skl_c[classIndex];
        attrs.Spd_sf = unPr_Spd_b[classIndex];
        attrs.Spd_gf = unPr_Spd_g[classIndex];
        attrs.Spd_total_max = unPr_Spd_c[classIndex];
        attrs.Lck_sf = unPr_Lck_b[classIndex];
        attrs.Lck_gf = unPr_Lck_g[classIndex];
        attrs.Lck_total_max = unPr_Lck_c[classIndex];
        attrs.Def_sf = unPr_Def_b[classIndex];
        attrs.Def_gf = unPr_Def_g[classIndex];
        attrs.Def_total_max = unPr_Def_c[classIndex];
        attrs.Res_sf = unPr_Res_b[classIndex];
        attrs.Res_gf = unPr_Res_g[classIndex];
        attrs.Res_total_max = unPr_Res_c[classIndex];
        attrs.Mov_sf = unPr_Mov_b[classIndex];
        attrs.Mov_total_max = unPr_Mov_c[classIndex];
        attrs.isPromo = 0;
        console.log(attrs);
        setAttrs(attrs);
        weps = unPr_Weps[classIndex].split(" ");
        wepcaps = unPr_Weps_c[classIndex].split(" ");
    } else if (classType = "pr"){
        attrs = {};
        attrs.HP_sf = Pr_HP_b[classIndex];
        attrs.HP_gf = Pr_HP_g[classIndex];
        attrs.HP_total_max = Pr_HP_c[classIndex];
        attrs.Str_sf = Pr_Str_b[classIndex];
        attrs.Str_gf = Pr_Str_g[classIndex];
        attrs.Str_total_max = Pr_Str_c[classIndex];
        attrs.Mag_sf = Pr_Mag_b[classIndex];
        attrs.Mag_gf = Pr_Mag_g[classIndex];
        attrs.Mag_total_max = Pr_Mag_c[classIndex];
        attrs.Skl_sf = Pr_Skl_b[classIndex];
        attrs.Skl_gf = Pr_Skl_g[classIndex];
        attrs.Skl_total_max = Pr_Skl_c[classIndex];
        attrs.Spd_sf = Pr_Spd_b[classIndex];
        attrs.Spd_gf = Pr_Spd_g[classIndex];
        attrs.Spd_total_max = Pr_Spd_c[classIndex];
        attrs.Lck_sf = Pr_Lck_b[classIndex];
        attrs.Lck_gf = Pr_Lck_g[classIndex];
        attrs.Lck_total_max = Pr_Lck_c[classIndex];
        attrs.Def_sf = Pr_Def_b[classIndex];
        attrs.Def_gf = Pr_Def_g[classIndex];
        attrs.Def_total_max = Pr_Def_c[classIndex];
        attrs.Res_sf = Pr_Res_b[classIndex];
        attrs.Res_gf = Pr_Res_g[classIndex];
        attrs.Res_total_max = Pr_Res_c[classIndex];
        attrs.Mov_sf = Pr_Mov_b[classIndex];
        attrs.Mov_total_max = Pr_Mov_c[classIndex];
        attrs.isPromo = 1;
        console.log(attrs);
        setAttrs(attrs);
        weps = Pr_Weps[classIndex].split(" ");
        wepcaps = Pr_Weps_c[classIndex].split(" ");
    }
    console.log("Stats set for " + currentclass+"! Class index is "+ classIndex);
    if (currentclass == undefined){
        console.log("Oh no! This is an error. :(");
    }
    let wepvals = [];
    weps.forEach(function(element) {
        wepvals.push(parseInt(element));
    });
    console.log(wepcaps);
    let update = {
        SwordU: 0,
        LanceU: 0,
        AxeU: 0,
        BowU: 0,
        DaggerU: 0,
        GunU: 0,
        AnimaU: 0,
        LightU: 0,
        DarkU: 0,
        StoneU: 0,
        StaffU: 0
    };
    const class_Weps = ["Sword", "Lance", "Axe", "Bow", "Dagger", "Gun", "Anima", "Light", "Dark", "Stone", "Staff"];
    let i;
    let j = 0;
    for(i = 1; i <= 11; i++) {
        let index = wepvals.indexOf(i);
        if( index != -1 ) {
            let prefix = class_Weps[i-1];
            update[prefix+"U"] = 1;
            update[prefix+"rank_max"] = wepcaps[j];
            console.log(wepcaps[j]);
            j++;
        }
    }
    console.log(update)
    setAttrs(update)

});
//racial fills!
on("change:Species", function(eventinfo) {
    let currentrace = eventinfo.newValue;
    if (r_names.indexOf(currentrace) != -1){
        raceIndex = r_names.indexOf(currentrace);
        setAttrs({
          HP_rg: r_HP_g[raceIndex],
          Str_rg: r_Str_g[raceIndex],
          Mag_rg: r_Mag_g[raceIndex],
          Skl_rg: r_Skl_g[raceIndex],
          Spd_rg: r_Spd_g[raceIndex],
          Lck_rg: r_Lck_g[raceIndex],
          Def_rg: r_Def_g[raceIndex],
          Res_rg: r_Res_g[raceIndex]

        });
    }
    console.log("Growths set for " +currentrace+"!");
});

//Base total scripts! Unfortunately, this isn't the end of the scripting, and the load times are just gonna get longer and longer. :(
on("change:HP_sf change:HP_i change:HP_bd", function(eventInfo) {
    getAttrs(["HP_sf", "HP_i","HP_bd","HP_total"], function(values) {
      setAttrs({
          HP_total: Number(values.HP_sf) + Number(values.HP_i) + Number(values.HP_bd),
          HP_current_max: Number(values.HP_sf) + Number(values.HP_i) + Number(values.HP_bd)
      });
   });
});
on("change:Str_sf change:Str_i change:Str_bd", function(eventInfo) {
    getAttrs(["Str_sf", "Str_i","Str_bd"], function(values) {
      setAttrs({
          Str_total: Number(values.Str_sf) + Number(values.Str_i) + Number(values.Str_bd)
      });
   });
});
on("change:Mag_sf change:Mag_i change:Mag_bd", function(eventInfo) {
    getAttrs(["Mag_sf", "Mag_i","Mag_bd"], function(values) {
      setAttrs({
          Mag_total: Number(values.Mag_sf) + Number(values.Mag_i) + Number(values.Mag_bd)
      });
   });
});
on("change:Skl_sf change:Skl_i change:Skl_bd", function(eventInfo) {
    getAttrs(["Skl_sf", "Skl_i","Skl_bd"], function(values) {
      setAttrs({
          Skl_total: Number(values.Skl_sf) + Number(values.Skl_i) + Number(values.Skl_bd)
      });
   });
});
on("change:Spd_sf change:Spd_i change:Spd_bd", function(eventInfo) {
    getAttrs(["Spd_sf", "Spd_i","Spd_bd"], function(values) {
      setAttrs({
          Spd_total: Number(values.Spd_sf) + Number(values.Spd_i) + Number(values.Spd_bd)
      });
   });
});
on("change:Lck_sf change:Lck_i change:Lck_bd", function(eventInfo) {
    getAttrs(["Lck_sf", "Lck_i","Lck_bd"], function(values) {
      setAttrs({
          Lck_total: Number(values.Lck_sf) + Number(values.Lck_i) + Number(values.Lck_bd)
      });
   });
});
on("change:Def_sf change:Def_i change:Def_bd", function(eventInfo) {
    getAttrs(["Def_sf", "Def_i","Def_bd"], function(values) {
      setAttrs({
          Def_total: Number(values.Def_sf) + Number(values.Def_i) + Number(values.Def_bd)
      });
   });
});
on("change:Res_sf change:Res_i change:Res_bd", function(eventInfo) {
    getAttrs(["Res_sf", "Res_i","Res_bd"], function(values) {
      setAttrs({
          Res_total: Number(values.Res_sf) + Number(values.Res_i) + Number(values.Res_bd)
      });
   });
});
on("change:Mov_sf change:Mov_i change:Mov_bd", function(eventInfo) {
    getAttrs(["Mov_sf", "Mov_i","Mov_bd"], function(values) {
      setAttrs({
          Mov_total: Number(values.Mov_sf) + Number(values.Mov_i) + Number(values.Mov_bd)
      });
   });
});

//Growth totals!
on("change:HP_rg change:HP_gf change:HP_gi", function(eventInfo) {
    getAttrs(["HP_rg", "HP_gf","HP_gi"], function(values) {
      setAttrs({
          HP_gtotal: Number(values.HP_rg) + Number(values.HP_gf) + Number(values.HP_gi)
      });
   });
});
on("change:Str_rg change:Str_gf change:Str_gi", function(eventInfo) {
    getAttrs(["Str_rg", "Str_gf","Str_gi"], function(values) {
      setAttrs({
          Str_gtotal: Number(values.Str_rg) + Number(values.Str_gf) + Number(values.Str_gi)
      });
   });
});
on("change:Mag_rg change:Mag_gf change:Mag_gi", function(eventInfo) {
    getAttrs(["Mag_rg", "Mag_gf","Mag_gi"], function(values) {
      setAttrs({
          Mag_gtotal: Number(values.Mag_rg) + Number(values.Mag_gf) + Number(values.Mag_gi)
      });
   });
});
on("change:Skl_rg change:Skl_gf change:Skl_gi", function(eventInfo) {
    getAttrs(["Skl_rg", "Skl_gf","Skl_gi"], function(values) {
      setAttrs({
          Skl_gtotal: Number(values.Skl_rg) + Number(values.Skl_gf) + Number(values.Skl_gi)
      });
   });
});
on("change:Spd_rg change:Spd_gf change:Spd_gi", function(eventInfo) {
    getAttrs(["Spd_rg", "Spd_gf","Spd_gi"], function(values) {
      setAttrs({
          Spd_gtotal: Number(values.Spd_rg) + Number(values.Spd_gf) + Number(values.Spd_gi)
      });
   });
});
on("change:Lck_rg change:Lck_gf change:Lck_gi", function(eventInfo) {
    getAttrs(["Lck_rg", "Lck_gf","Lck_gi"], function(values) {
      setAttrs({
          Lck_gtotal: Number(values.Lck_rg) + Number(values.Lck_gf) + Number(values.Lck_gi)
      });
   });
});
on("change:Def_rg change:Def_gf change:Def_gi", function(eventInfo) {
    getAttrs(["Def_rg", "Def_gf","Def_gi"], function(values) {
      setAttrs({
          Def_gtotal: Number(values.Def_rg) + Number(values.Def_gf) + Number(values.Def_gi)
      });
   });
});
on("change:Res_rg change:Res_gf change:Res_gi", function(eventInfo) {
    getAttrs(["Res_rg", "Res_gf","Res_gi"], function(values) {
      setAttrs({
          Res_gtotal: Number(values.Res_rg) + Number(values.Res_gf) + Number(values.Res_gi)
      });
   });
});

//Even more scripting! For skill checks this time. :(
on("change:Athletics_check change:str_total change:Lck_total",function(eventInfo){
    getAttrs(["Athletics_check","Str_total","Lck_total"], function(values){
        let skillbonus = 0;
        if (values.Athletics_check == "on"){
            skillbonus = 5;
        }
        setAttrs({
          Athletics_total: Math.round(((values.Str_total + values.Lck_total)/2)/2 + skillbonus)
      });
    });
});
on("change:Arcana_check change:Mag_total change:Lck_total",function(eventInfo){
    getAttrs(["Arcana_check","Mag_total","Lck_total"], function(values){
        let skillbonus = 0;
        if (values.Arcana_check == "on"){
            skillbonus = 5;
        }
        setAttrs({
          Arcana_total: Math.round(((values.Mag_total + values.Lck_total)/2)/2 + skillbonus)
      });
    });
});
on("change:History_check change:Mag_total change:Lck_total",function(eventInfo){
    getAttrs(["History_check","Mag_total","Lck_total"], function(values){
        let skillbonus = 0;
        if (values.History_check == "on"){
            skillbonus = 5;
        }
        setAttrs({
          History_total: Math.round(((values.Mag_total + values.Lck_total)/2)/2 + skillbonus)
      });
    });
});
on("change:Investigation_check change:Mag_total change:Lck_total",function(eventInfo){
    getAttrs(["Investigation_check","Mag_total","Lck_total"], function(values){
        let skillbonus = 0;
        if (values.Investigation_check == "on"){
            skillbonus = 5;
        }
        setAttrs({
          Investigation_total: Math.round(((values.Mag_total + values.Lck_total)/2)/2 + skillbonus)
      });
    });
});
on("change:Nature_check change:Mag_total change:Lck_total",function(eventInfo){
    getAttrs(["Nature_check","Mag_total","Lck_total"], function(values){
        let skillbonus = 0;
        if (values.Nature_check == "on"){
            skillbonus = 5;
        }
        setAttrs({
          Nature_total: Math.round(((values.Mag_total + values.Lck_total)/2)/2 + skillbonus)
      });
    });
});
on("change:Religion_check change:Mag_total change:Lck_total",function(eventInfo){
    getAttrs(["Religion_check","Mag_total","Lck_total"], function(values){
        let skillbonus = 0;
        if (values.Religion_check == "on"){
            skillbonus = 5;
        }
        setAttrs({
          Religion_total: Math.round(((values.Mag_total + values.Lck_total)/2)/2 + skillbonus)
      });
    });
});
on("change:Deception_check change:Skl_total change:Lck_total",function(eventInfo){
    getAttrs(["Deception_check","Skl_total","Lck_total"], function(values){
        let skillbonus = 0;
        if (values.Deception_check == "on"){
            skillbonus = 5;
        }
        setAttrs({
          Deception_total: Math.round(((values.Skl_total + values.Lck_total)/2)/2 + skillbonus)
      });
    });
});
on("change:Intimidation_check change:Skl_total change:Lck_total",function(eventInfo){
    getAttrs(["Intimidation_check","Skl_total","Lck_total"], function(values){
        let skillbonus = 0;
        if (values.Intimidation_check == "on"){
            skillbonus = 5;
        }
        setAttrs({
          Intimidation_total: Math.round(((values.Skl_total + values.Lck_total)/2)/2 + skillbonus)
      });
    });
});
on("change:Performance_check change:Skl_total change:Lck_total",function(eventInfo){
    getAttrs(["Performance_check","Skl_total","Lck_total"], function(values){
        let skillbonus = 0;
        if (values.Performance_check == "on"){
            skillbonus = 5;
        }
        setAttrs({
          Performance_total: Math.round(((values.Skl_total + values.Lck_total)/2)/2 + skillbonus)
      });
    });
});
on("change:Persuasion_check change:Skl_total change:Lck_total",function(eventInfo){
    getAttrs(["Persuasion_check","Skl_total","Lck_total"], function(values){
        let skillbonus = 0;
        if (values.Persuasion_check == "on"){
            skillbonus = 5;
        }
        setAttrs({
          Persuasion_total: Math.round(((values.Skl_total + values.Lck_total)/2)/2 + skillbonus)
      });
    });
});
on("change:Acrobatics_check change:Spd_total change:Lck_total",function(eventInfo){
    getAttrs(["Acrobatics_check","Spd_total","Lck_total"], function(values){
        let skillbonus = 0;
        if (values.Acrobatics_check == "on"){
            skillbonus = 5;
        }
        setAttrs({
          Acrobatics_total: Math.round(((values.Spd_total + values.Lck_total)/2)/2 + skillbonus)
      });
    });
});
on("change:SleightofHand_check change:Spd_total change:Lck_total",function(eventInfo){
    getAttrs(["SleightofHand_check","Spd_total","Lck_total"], function(values){
        let skillbonus = 0;
        if (values.SleightofHand_check == "on"){
            skillbonus = 5;
        }
        setAttrs({
          SleightofHand_total: Math.round(((values.Spd_total + values.Lck_total)/2)/2 + skillbonus)
      });
    });
});
on("change:Stealth_check change:Spd_total change:Lck_total",function(eventInfo){
    getAttrs(["Stealth_check","Spd_total","Lck_total"], function(values){
        let skillbonus = 0;
        if (values.Stealth_check == "on"){
            skillbonus = 5;
        }
        setAttrs({
          Stealth_total: Math.round(((values.Spd_total + values.Lck_total)/2)/2 + skillbonus)
      });
    });
});
on("change:AnimalHandling_check change:Res_total change:Lck_total",function(eventInfo){
    getAttrs(["AnimalHandling_check","Res_total","Lck_total"], function(values){
        let skillbonus = 0;
        if (values.AnimalHandling_check == "on"){
            skillbonus = 5;
        }
        setAttrs({
          AnimalHandling_total: Math.round(((values.Res_total + values.Lck_total)/2)/2 + skillbonus)
      });
    });
});
on("change:Insight_check change:Res_total change:Lck_total",function(eventInfo){
    getAttrs(["Insight_check","Res_total","Lck_total"], function(values){
        let skillbonus = 0;
        if (values.Insight_check == "on"){
            skillbonus = 5;
        }
        setAttrs({
          Insight_total: Math.round(((values.Res_total + values.Lck_total)/2)/2 + skillbonus)
      });
    });
});
on("change:Medicine_check change:Res_total change:Lck_total",function(eventInfo){
    getAttrs(["Medicine_check","Res_total","Lck_total"], function(values){
        let skillbonus = 0;
        if (values.Medicine_check == "on"){
            skillbonus = 5;
        }
        setAttrs({
          Medicine_total: Math.round(((values.Res_total + values.Lck_total)/2)/2 + skillbonus)
      });
    });
});
on("change:Perception_check change:Res_total change:Lck_total",function(eventInfo){
    getAttrs(["Perception_check","Res_total","Lck_total"], function(values){
        let skillbonus = 0;
        if (values.Perception_check == "on"){
            skillbonus = 5;
        }
        setAttrs({
          Perception_total: Math.round(((values.Res_total + values.Lck_total)/2)/2 + skillbonus)
      });
    });
});
on("change:Survival_check change:Res_total change:Lck_total",function(eventInfo){
    getAttrs(["Survival_check","Res_total","Lck_total"], function(values){
        let skillbonus = 0;
        if (values.Survival_check == "on"){
            skillbonus = 5;
        }
        setAttrs({
          Survival_total: Math.round(((values.Res_total + values.Lck_total)/2)/2 + skillbonus)
      });
    });
});

//Weapon ranks!
on("change:SwordEXP", function(eventInfo) {
    currEXP = eventInfo.newValue;
    getAttrs(["Swordrank_max"], function(values) {
        maxRank = values.Swordrank_max
    });
    Rank = "E";
    if (currEXP > 30){
        Rank = "D";
        if (currEXP > 70){
            Rank = "C";
            if (currEXP > 120){
                Rank = "B";
                if ((currEXP > 180) && (maxRank != "B")){
                    Rank = "A";
                    if ((currEXP > 250) && (maxRank == "S")){
                        Rank = "S";
                    }
                }
            }
        }
    }
    setAttrs({
          Swordrank: Rank
    });
});
on("change:LanceEXP", function(eventInfo) {
    currEXP = eventInfo.newValue;
    getAttrs(["Lancerank_max"], function(values) {
        maxRank = values.Lancerank_max
    });
    Rank = "E";
    if (currEXP > 30){
        Rank = "D";
        if (currEXP > 70){
            Rank = "C";
            if (currEXP > 120){
                Rank = "B";
                if ((currEXP > 180) && (maxRank != "B")){
                    Rank = "A";
                    if ((currEXP > 250) && (maxRank == "S")){
                        Rank = "S";
                    }
                }
            }
        }
    }
    setAttrs({
          Lancerank: Rank
    });
});
on("change:AxeEXP", function(eventInfo) {
    currEXP = eventInfo.newValue;
    getAttrs(["Axerank_max"], function(values) {
        maxRank = values.Axerank_max
    });
    Rank = "E";
    if (currEXP > 30){
        Rank = "D";
        if (currEXP > 70){
            Rank = "C";
            if (currEXP > 120){
                Rank = "B";
                if ((currEXP > 180) && (maxRank != "B")){
                    Rank = "A";
                    if ((currEXP > 250) && (maxRank == "S")){
                        Rank = "S";
                    }
                }
            }
        }
    }
    setAttrs({
          Axerank: Rank
    });
});
on("change:BowEXP", function(eventInfo) {
    currEXP = eventInfo.newValue;
    getAttrs(["Bowrank_max"], function(values) {
        maxRank = values.Bowrank_max
    });
    Rank = "E";
    if (currEXP > 30){
        Rank = "D";
        if (currEXP > 70){
            Rank = "C";
            if (currEXP > 120){
                Rank = "B";
                if ((currEXP > 180) && (maxRank != "B")){
                    Rank = "A";
                    if ((currEXP > 250) && (maxRank == "S")){
                        Rank = "S";
                    }
                }
            }
        }
    }
    setAttrs({
          Bowrank: Rank
    });
});
on("change:DaggerEXP", function(eventInfo) {
    currEXP = eventInfo.newValue;
    getAttrs(["Daggerrank_max"], function(values) {
        maxRank = values.Daggerrank_max
    });
    Rank = "E";
    if (currEXP > 30){
        Rank = "D";
        if (currEXP > 70){
            Rank = "C";
            if (currEXP > 120){
                Rank = "B";
                if ((currEXP > 180) && (maxRank != "B")){
                    Rank = "A";
                    if ((currEXP > 250) && (maxRank == "S")){
                        Rank = "S";
                    }
                }
            }
        }
    }
    setAttrs({
          Daggerrank: Rank
    });
});
on("change:GunEXP", function(eventInfo) {
    currEXP = eventInfo.newValue;
    getAttrs(["Gunrank_max"], function(values) {
        maxRank = values.Gunrank_max
    });
    Rank = "E";
    if (currEXP > 30){
        Rank = "D";
        if (currEXP > 70){
            Rank = "C";
            if (currEXP > 120){
                Rank = "B";
                if ((currEXP > 180) && (maxRank != "B")){
                    Rank = "A";
                    if ((currEXP > 250) && (maxRank == "S")){
                        Rank = "S";
                    }
                }
            }
        }
    }
    setAttrs({
          Gunrank: Rank
    });
});
on("change:DarkEXP", function(eventInfo) {
    currEXP = eventInfo.newValue;
    getAttrs(["Darkrank_max"], function(values) {
        maxRank = values.Darkrank_max
    });
    Rank = "E";
    if (currEXP > 30){
        Rank = "D";
        if (currEXP > 70){
            Rank = "C";
            if (currEXP > 120){
                Rank = "B";
                if ((currEXP > 180) && (maxRank != "B")){
                    Rank = "A";
                    if ((currEXP > 250) && (maxRank == "S")){
                        Rank = "S";
                    }
                }
            }
        }
    }
    setAttrs({
          Darkrank: Rank
    });
});
on("change:LightEXP", function(eventInfo) {
    currEXP = eventInfo.newValue;
    getAttrs(["Lightrank_max"], function(values) {
        maxRank = values.Lightrank_max
    });
    Rank = "E";
    if (currEXP > 30){
        Rank = "D";
        if (currEXP > 70){
            Rank = "C";
            if (currEXP > 120){
                Rank = "B";
                if ((currEXP > 180) && (maxRank != "B")){
                    Rank = "A";
                    if ((currEXP > 250) && (maxRank == "S")){
                        Rank = "S";
                    }
                }
            }
        }
    }
    setAttrs({
          Lightrank: Rank
    });
});
on("change:AnimaEXP", function(eventInfo) {
    currEXP = eventInfo.newValue;
    getAttrs(["Animarank_max"], function(values) {
        maxRank = values.Animarank_max
    });
    Rank = "E";
    if (currEXP > 30){
        Rank = "D";
        if (currEXP > 70){
            Rank = "C";
            if (currEXP > 120){
                Rank = "B";
                if ((currEXP > 180) && (maxRank != "B")){
                    Rank = "A";
                    if ((currEXP > 250) && (maxRank == "S")){
                        Rank = "S";
                    }
                }
            }
        }
    }
    setAttrs({
          Animarank: Rank
    });
});
on("change:StoneEXP", function(eventInfo) {
    currEXP = eventInfo.newValue;
    getAttrs(["Stonerank_max"], function(values) {
        maxRank = values.Stonerank_max
    });
    Rank = "E";
    if (currEXP > 30){
        Rank = "D";
        if (currEXP > 70){
            Rank = "C";
            if (currEXP > 120){
                Rank = "B";
                if ((currEXP > 180) && (maxRank != "B")){
                    Rank = "A";
                    if ((currEXP > 250) && (maxRank == "S")){
                        Rank = "S";
                    }
                }
            }
        }
    }
    setAttrs({
          Stonerank: Rank
    });
});
on("change:StaffEXP", function(eventInfo) {
    currEXP = eventInfo.newValue;
    getAttrs(["Staffrank_max"], function(values) {
        maxRank = values.Staffrank_max
    });
    Rank = "E";
    if (currEXP > 30){
        Rank = "D";
        if (currEXP > 70){
            Rank = "C";
            if (currEXP > 120){
                Rank = "B";
                if ((currEXP > 180) && (maxRank != "B")){
                    Rank = "A";
                    if ((currEXP > 250) && (maxRank == "S")){
                        Rank = "S";
                    }
                }
            }
        }
    }
    setAttrs({
          Staffrank: Rank
    });
});

//Statcap checking
on("change:HP_total",function(eventInfo){
    getAttrs(["HP_total","HP_total_max"], function(values){
        if (values.HP_total > values.HP_total_max){
            setAttrs({
                HP_total: values.HP_total_max
            });
        }
    });
});
on("change:HP_current",function(eventInfo){
    getAttrs(["HP_current","HP_current_max"], function(values){
        if (values.HP_current > values.HP_current_max){
            setAttrs({
                HP_current: values.HP_current_max
            });
        }
    });
});
on("change:Str_total",function(eventInfo){
    getAttrs(["Str_total","Str_total_max"], function(values){
        if (values.Str_total > values.Str_total_max){
            setAttrs({
                Str_total: values.Str_total_max
            });
        }
    });
});
on("change:Mag_total",function(eventInfo){
    getAttrs(["Mag_total","Mag_total_max"], function(values){
        if (values.Mag_total > values.Mag_total_max){
            setAttrs({
                Mag_total: values.Mag_total_max
            });
        }
    });
});
on("change:Skl_total",function(eventInfo){
    getAttrs(["Skl_total","Skl_total_max"], function(values){
        if (values.Skl_total > values.Skl_total_max){
            setAttrs({
                Skl_total: values.Skl_total_max
            });
        }
    });
});
on("change:Spd_total",function(eventInfo){
    getAttrs(["Spd_total","Spd_total_max"], function(values){
        if (values.Spd_total > values.Spd_total_max){
            setAttrs({
                Spd_total: values.Spd_total_max
            });
        }
    });
});
on("change:Lck_total",function(eventInfo){
    getAttrs(["Lck_total","Lck_total_max"], function(values){
        if (values.Lck_total > values.Lck_total_max){
            setAttrs({
                Lck_total: values.Lck_total_max
            });
        }
    });
});
on("change:Def_total",function(eventInfo){
    getAttrs(["Def_total","Def_total_max"], function(values){
        if (values.Def_total > values.Def_total_max){
            setAttrs({
                Def_total: values.Def_total_max
            });
        }
    });
});
on("change:Res_total",function(eventInfo){
    getAttrs(["Res_total","Res_total_max"], function(values){
        if (values.Res_total > values.Res_total_max){
            setAttrs({
                Res_total: values.Res_total_max
            });
        }
    });
});
on("change:Mov_total",function(eventInfo){
    getAttrs(["Mov_total","Mov_total_max"], function(values){
        if (values.Mov_total > values.Mov_total_max){
            setAttrs({
                Mov_total: values.Mov_total_max
            });
        }
    });
});

//Hit
on("change:Skl_total change:Lck_total change:repeating_weapons change:_reporder_repeating_weapons remove:repeating_weapons", function() {
   getSectionIDsOrdered("repeating_weapons", function(idarray) {
       fID = idarray[0];
       getAttrs(["Skl_total","Lck_total","repeating_weapons_"+fID+"_hit"], function(v) {
           let wHit = Number(v["repeating_weapons_"+fID+"_hit"]);
           if (wHit == undefined){
               wHit = 0;
               console.log("No weapon! :(")
           }
           let Skl = v.Skl_total;
           let Lck = v.Skl_total;
           setAttrs({
               Hit: Math.round((Skl * 3) + wHit + (Lck / 2))
           });
           console.log(Math.round((Skl * 3) + wHit + (Lck / 2)));
       });
   });
});

//Crit
on("change:Skl_total change:repeating_weapons change:_reporder_repeating_weapons remove:repeating_weapons", function() {
   getSectionIDsOrdered("repeating_weapons", function(idarray) {
       fID = idarray[0];
       getAttrs(["Skl_total","repeating_weapons_"+fID+"_crit"], function(v) {
           let wCrit = Number(v["repeating_weapons_"+fID+"_crit"]);
           if (wCrit == undefined){
               wHit = 0;
               console.log("No weapon! :(")
           }
           let SklC = v.Skl_total;
           setAttrs({
               Crit: Math.round((SklC / 2) + wCrit)
           });
           console.log(Math.round((SklC / 2) + wCrit));
       });
   });
});
//Avo
on("change:Spd_total change:Lck_total", function() {
   getAttrs(["Spd_total", "Lck_total"], function(v) {
       Spd = v.Spd_total;
       LckA = v.Lck_total;
      setAttrs({
          Avo: Math.round(((Spd * 3) + LckA) / 2)
      });
   });
});
//Weapon # limits
on("change:repeating_weapons", function() {
   getSectionIDsOrdered("repeating_weapons", function(idarray) {
       if (idarray.length > 5){
           cl = idarray.length - 1;
           removeRepeatingRow("repeating_weapons_" + idarray[cl]);
       }
   });
});
//Check for NaNs
on("change:hit", function(eventInfo) {
    if (isNaN(eventInfo.newValue)){
        getAttrs(["Lck_total","Skl_total"], function(v){
            setAttrs({
                Hit: Math.round((v.Skl_total * 3) + (v.Lck_total / 2))
            });
        });
        console.log(":( NaN exception");
    }
});
on("change:crit", function(eventInfo) {
    if (isNaN(eventInfo.newValue)){
        getAttrs(["Skl_total"], function(v){
            setAttrs({
                Crit: Math.round((v.Skl_total / 2))
            });
        });
        console.log(":( NaN exception");
    }
});
on("change:f_Uses", function(eventInfo) {
    if (isNaN(eventInfo.newValue) || eventInfo.newValue == undefined){
        setAttrs({
            f_Uses: 9999 //Just set this to a ludicrously high amount since they'll be fistfighting, most likely
        });
        console.log(":( NaN exception");
    }
});
//Other firstmost values for the battlescript
on("change:repeating_weapons change:repeating_weapons_WName change:repeating_weapons_WType change:repeating_weapons_Wt change:repeating_weapons_Mt change:repeating_weapons_Range1 change:repeating_weapons_Range2 change:_reporder_repeating_weapons remove:repeating_weapons", function() {
   getSectionIDsOrdered("repeating_weapons", function(idarray) {
       console.log(idarray);
       if (idarray.length < 1){
           console.log("No weapon! Filling in default values");
           update = {
               f_WName: "Empty",
               f_WType: "Stones/Other",
               f_Strengths: "",
               f_Wt: 0,
               f_Mt: 0,
               f_Range1: 1,
               f_Range2: 1,
               f_Uses: 68932, //some arbitrarily high number
               f_WRank: "E",
               fid: ""
           };
           console.log(update);
           setAttrs(update);
           return;
       } else {
           fID = idarray[0];
           getAttrs(["repeating_weapons_"+fID+"_WName","repeating_weapons_"+fID+"_WType","repeating_weapons_"+fID+"_Wt","repeating_weapons_"+fID+"_Mt","repeating_weapons_"+fID+"_Range1","repeating_weapons_"+fID+"_Range2","repeating_weapons_"+fID+"_Strengths","repeating_weapons_"+fID+"_Uses","repeating_weapons_"+fID+"_WRank"], function(v) {
               update = {
                   f_WName: v["repeating_weapons_"+fID+"_WName"],
                   f_WType: v["repeating_weapons_"+fID+"_WType"],
                   f_Strengths: v["repeating_weapons_"+fID+"_Strengths"],
                   f_Wt: Number(v["repeating_weapons_"+fID+"_Wt"]),
                   f_Mt: Number(v["repeating_weapons_"+fID+"_Mt"]),
                   f_Range1: Number(v["repeating_weapons_"+fID+"_Range1"]),
                   f_Range2: Number(v["repeating_weapons_"+fID+"_Range2"]),
                   f_Uses: Number(v["repeating_weapons_"+fID+"_Uses"]),
                   f_WRank: v["repeating_weapons_"+fID+"_WRank"],
                   fid: fID
               };
               console.log(update);
               setAttrs(update);
           });
       }
   });
});
//Decrement uses

on("change:Species change:Class", function(eventInfo) {
    setAttrs({
        Weaknesses: ""
    });
    let weaklist = [];
    getAttrs(["Species","Class"], function(v){
        //Armor
        if ((v.Class === "Knight")||(v.Class === "Great Knight")||(v.Class === "General")){
            weaklist.push("Armor");
        }
        //Dragon
        if ((v.Class == "Wyvern Rider")||(v.Class == "Wyvern Lord")||(v.Class == "Revenant Knight")|| (v.Species == "Manakete")||(v.Species == "Half-Manakete")){
            weaklist.push("Dragon");
        }
        //Beast
        if ((v.Class == "Cavalier")||(v.Class == "Troubadour")||(v.Class == "Pegasus Knight")||(v.Class == "Griffin Rider")||(v.Class == "Paladin")||(v.Class == "Great Knight")||(v.Class == "Falcon Knight")||(v.Class == "Dark Flier")||(v.Class == "Griffin Lord")||(v.Class == "Light Flier")||(v.Class == "Bow Knight")||(v.Class == "Dark Knight")||(v.Class == "Valkyrie")||(v.Species == "Kitsune")||(v.Species == "Half-Kitsune")||(v.Species == "Wolfskin")||(v.Species == "Half-Wolfskin")||(v.Species == "Laguz")||(v.Species == "Half-Laguz")){
            weaklist.push("Beast");
        }
        //Flier
        if ((v.Class == "Pegasus Knight")||(v.Class == "Griffin Rider")||(v.Class == "Wyvern Rider")||(v.Class == "Falcon Knight")||(v.Class == "Dark Flier")||(v.Class == "Griffin Lord")||(v.Class == "Light Flier")||(v.Class == "Wyvern Lord")||(v.Class == "Revenant Knight")){
            weaklist.push("Flier");
        }
        setAttrs({
            Weaknesses: weaklist.join(", ")
        });
    });
});

//Initialize values for API, because ded
on("sheet:opened", function(){
    getAttrs(["EXP","SwordEXP","LanceEXP","AxeEXP","BowEXP","DaggerEXP","GunEXP","AnimaEXP","DarkEXP","LightEXP","StoneEXP","StaffEXP","Level","HP_i","Str_i","Mag_i","Skl_i","Spd_i","Lck_i","Def_i","Res_i","Mov_i","HP_bd","Str_bd","Mag_bd","Skl_bd","Spd_bd","Lck_bd","Def_bd","Res_bd","Mov_bd","item_uses0","item_uses1","item_uses2","Swordrank","Lancerank","Axerank","Bowrank","Daggerrank","Gunrank","Animarank","Lightrank","Darkrank","Staffrank","Stonerank"], function(v){
        setAttrs({
            EXP: v.EXP,
            SwordEXP: v.SwordEXP,
            LanceEXP: v.LanceEXP,
            AxeEXP: v.AxeEXP,
            BowEXP: v.BowEXP,
            DaggerEXP: v.DaggerEXP,
            GunEXP: v.GunEXP,
            AnimaEXP: v.AnimaEXP,
            DarkEXP: v.DarkEXP,
            LightEXP: v.LightEXP,
            StoneEXP: v.StoneEXP,
            StaffEXP: v.StaffEXP,
            Swordrank: v.Swordrank,
            Lancerank: v.Lancerank,
            Axerank: v.Axerank,
            Bowrank: v.Bowrank,
            Daggerrank: v.Daggerrank,
            Gunrank: v.Gunrank,
            Animarank: v.Animarank,
            Darkrank: v.Darkrank,
            Lightrank: v.Lightrank,
            Stonerank: v.Stonerank,
            Staffrank: v.Staffrank,
            Level: v.Level,
            HP_i: v.HP_i,
            Str_i: v.Str_i,
            Mag_i: v.Mag_i,
            Skl_i: v.Skl_i,
            Spd_i: v.Spd_i,
            Lck_i: v.Lck_i,
            Def_i: v.Def_i,
            Res_i: v.Res_i,
            Mov_i: v.Mov_i,
            HP_bd: v.HP_bd,
            Str_bd: v.Str_bd,
            Mag_bd: v.Mag_bd,
            Skl_bd: v.Skl_bd,
            Spd_bd: v.Spd_bd,
            Lck_bd: v.Lck_bd,
            Def_bd: v.Def_bd,
            Res_bd: v.Res_bd,
            Mov_bd: v.Mov_bd,
            item_uses0: v.item_uses0,
            item_uses1: v.item_uses1,
            item_uses2: v.item_uses2,
        });
        console.log("Initializing values...")
    });
});
//Broken item script! Because of the way fists are handled, they should never be able to reach zero, so I think it'll be ok
on("change:repeating_weapons:Uses", function(eventInfo) {
    console.log(eventInfo.newValue);
	setObj = {};//create an empty object
    if (eventInfo.newValue === "0"){
        console.log("Broken")
        let RID = eventInfo.sourceAttribute.slice(18,38) //This gets the repeating row ID of the changed attribute
        getAttrs(["repeating_weapons_"+RID+"_WName"], function(v){
            setObj["repeating_weapons_"+RID+"_WRank"]="UU";
            setObj["repeating_weapons_"+RID+"_WName"]="Broken " + v["repeating_weapons_"+RID+"_WName"];
            log(v)
            setAttrs(setObj);
            log(setObj)
        });
    }
});
</script>

</html>
