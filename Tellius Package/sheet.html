<html>
<div class="sheet-charinfo">
    <div class = "sheet-header"> INFO</div>
    <div class="sheet-row">
        <label> Name:
            <input type = "text" name = "attr_name" />
        </label>

        <div class="gender">
            <label> Gender:
                <input type = "text" name = "attr_gender" />
            </label>
        </div>
        <label> Species:
          <select name = "attr_Species">
              <option selected disabled hidden></option>
              <option>Beorc</option>
              <option>Cat Laguz</option>
              <option>Tiger Laguz</option>
              <option>Lion Laguz</option>
              <option>Wolf Laguz</option>
              <option>Hawk Laguz</option>
              <option>Raven Laguz</option>
              <option>Heron Laguz</option>
              <option>Red Dragon</option>
              <option>White Dragon</option>
              <option>Black Dragon</option>
              <option>Branded</option>
              <option>Other</option>
          </select>
        </label>
        <label>
            <select name="attr_all" style = "width: 15%;">
            <option>Player</option>
            <option>Ally</option>
            <option>Enemy</option>
            </select>
        </label>
    </div>
    <div class = "sheet-row">
        <label> Class:
        <!--I'd love to have this change based on the status of the promo checkbox, but I don't think that's possible given that you can't use IDs in Roll20-->
        <select name = "attr_Class">
            <option selected disabled hidden></option>
            <option>Ranger</option>
            <option>Myrmidon</option>
            <option>Soldier</option>
            <option>Fighter</option>
            <option>Archer</option>
            <option>Armor Lance</option>
            <option>Armor Axe</option>
            <option>Armor Sword</option>
            <option>Thief</option>
            <option>Bandit</option>
            <option>Fire Mage</option>
            <option>Thunder Mage</option>
            <option>Wind Mage</option>
            <option>Light Mage</option>
            <option>Priest</option>
            <option>Cleric</option>
            <option>Sword Knight</option>
            <option>Lance Knight</option>
            <option>Axe Knight</option>
            <option>Bow Knight</option>
            <option>Pegasus Knight</option>
            <option>Dracoknight</option>
            <option>Lion</option>
            <option>Tiger</option>
            <option>Cat</option>
            <option>Wolf</option>
            <option>Hawk</option>
            <option>Raven</option>
            <option>Heron</option>
            <option>Red Dragon</option>
            <option>White Dragon</option>
            <option disabled>----</option>
            <option>Hero</option>
            <option>Swordmaster</option>
            <option>Halberdier</option>
            <option>Warrior</option>
            <option>Sniper</option>
            <option>Lance General</option>
            <option>Axe General</option>
            <option>Sword General</option>
            <option>Rogue</option>
            <option>Fire Sage</option>
            <option>Thunder Sage</option>
            <option>Wind Sage</option>
            <option>Light Sage</option>
            <option>Dark Sage</option>
            <option>Bishop</option>
            <option>Valkyrie</option>
            <option>Blade Paladin</option>
            <option>Lance Paladin</option>
            <option>Axe Paladin</option>
            <option>Bow Paladin</option>
            <option>Falcon Knight</option>
            <option>Dragonmaster</option>
            <option disabled>----</option>
            <option>Vanguard</option>
            <option>Trueblade</option>
            <option>Sentinel</option>
            <option>Reaver</option>
            <option>Marksman</option>
            <option>Marshall</option>
            <option>Whisper</option>
            <option>Anima Archsage</option>
            <option>Dark Archsage</option>
            <option>Light Priestess</option>
            <option>Saint</option>
            <option>Gold Knight</option>
            <option>Silver Knight</option>
            <option>Seraph Knight</option>
            <option>Dragonlord</option>
        </select>
        </label>
        <label> Level:
            <input type = "number" name = "attr_Level" min = "1"  max = "40" value = "1"/>
        </label>
        <label> EXP:
            <span name="attr_EXP">0</span>
        </label>
        <label>
            Weaknesses:
            <span name ="attr_Weaknesses"></span>
        </label>

    </div>
</div>
<div class = "sheet-checks">
    <div class = "sheet-header">SKILL CHECKS</div>
        <table>
            <tr>
                <th>Name</th>
                <th>Trained?</th>
                <th>Stat</th>
                <th>Total</th>
            </tr>
            <tr>
                <td><span>Athletics (Str)</span></td>
                <td><input type = "checkbox" name ="attr_Athletics_check"/></td>
                <td><span name = "attr_Str_total">0</span></td>
                <td><span name = "attr_Athletics_total">0</span></td>
            </tr>
            <tr>
                <td><span>Arcana (Mag)</span></td>
                <td><input type = "checkbox" name ="attr_Arcana_check"/></td>
                <td><span name = "attr_Mag_total">0</span></td>
                <td><span name = "attr_Arcana_total">0</span></td>
            </tr>
            <tr>
                <td><span>History (Mag)</span></td>
                <td><input type = "checkbox" name ="attr_History_check"/></td>
                <td><span name = "attr_Mag_total">0</span></td>
                <td><span name = "attr_History_total">0</span></td>
            </tr>
            <tr>
            	<td><span>Invest. (Mag)</span></td>
            	<td><input type = "checkbox" name ="attr_Investigation_check"/></td>
            	<td><span name = "attr_Mag_total">0</span></td>
            	<td><span name = "attr_Investigation_total">0</span></td>
        	</tr>
        	<tr>
            	<td><span>Nature (Mag)</span></td>
            	<td><input type = "checkbox" name ="attr_Nature_check"/></td>
            	<td><span name = "attr_Mag_total">0</span></td>
            	<td><span name = "attr_Nature_total">0</span></td>
        	</tr>
        	<tr>
            	<td><span>Religion (Mag)</span></td>
            	<td><input type = "checkbox" name ="attr_Religion_check"/></td>
            	<td><span name = "attr_Mag_total">0</span></td>
            	<td><span name = "attr_Religion_total">0</span></td>
        	</tr>
        	<tr>
            	<td><span>Deception (Skl)</span></td>
            	<td><input type = "checkbox" name ="attr_Deception_check"/></td>
            	<td><span name = "attr_Skl_total">0</span></td>
            	<td><span name = "attr_Deception_total">0</span></td>
        	</tr>
        	<tr>
            	<td><span>Intimid. (Skl)</span></td>
            	<td><input type = "checkbox" name ="attr_Intimidation_check"/></td>
            	<td><span name = "attr_Skl_total">0</span></td>
            	<td><span name = "attr_Intimidation_total">0</span></td>
        	</tr>
        	<tr>
            	<td><span>Performance (Skl)</span></td>
            	<td><input type = "checkbox" name ="attr_Performance_check"/></td>
            	<td><span name = "attr_Skl_total">0</span></td>
            	<td><span name = "attr_Performance_total">0</span></td>
        	</tr>
        	<tr>
            	<td><span>Persuasion (Skl)</span></td>
            	<td><input type = "checkbox" name ="attr_Persuasion_check"/></td>
            	<td><span name = "attr_Skl_total">0</span></td>
            	<td><span name = "attr_Persuasion_total">0</span></td>
        	</tr>
        	<tr>
            	<td><span>Acrobatics (Spd)</span></td>
            	<td><input type = "checkbox" name ="attr_Acrobatics_check"/></td>
            	<td><span name = "attr_Spd_total">0</span></td>
            	<td><span name = "attr_Acrobatics_total">0</span></td>
        	</tr>
        	<tr>
            	<td><span>Sl. of Hand (Spd)</span></td>
            	<td><input type = "checkbox" name ="attr_SleightofHand_check"/></td>
            	<td><span name = "attr_Spd_total">0</span></td>
            	<td><span name = "attr_SleightofHand_total">0</span></td>
        	</tr>
        	<tr>
            	<td><span>Stealth (Spd)</span></td>
            	<td><input type = "checkbox" name ="attr_Stealth_check"/></td>
            	<td><span name = "attr_Spd_total">0</span></td>
            	<td><span name = "attr_Stealth_total">0</span></td>
        	</tr>
        	<tr>
            	<td><span>An. Handling (Res)</span></td>
            	<td><input type = "checkbox" name ="attr_AnimalHandling_check"/></td>
            	<td><span name = "attr_Res_total">0</span></td>
            	<td><span name = "attr_AnimalHandling_total">0</span></td>
        	</tr>
        	<tr>
            	<td><span>Insight (Res)</span></td>
            	<td><input type = "checkbox" name ="attr_Insight_check"/></td>
            	<td><span name = "attr_Res_total">0</span></td>
            	<td><span name = "attr_Insight_total">0</span></td>
        	</tr>
        	<tr>
            	<td><span>Medicine (Res)</span></td>
            	<td><input type = "checkbox" name ="attr_Medicine_check"/></td>
            	<td><span name = "attr_Res_total">0</span></td>
            	<td><span name = "attr_Medicine_total">0</span></td>
        	</tr>
        	<tr>
            	<td><span>Perception (Res)</span></td>
            	<td><input type = "checkbox" name ="attr_Perception_check"/></td>
            	<td><span name = "attr_Res_total">0</span></td>
            	<td><span name = "attr_Perception_total">0</span></td>
        	</tr>
        	<tr>
            	<td><span>Survival (Res)</span></td>
            	<td><input type = "checkbox" name ="attr_Survival_check"/></td>
            	<td><span name = "attr_Res_total">0</span></td>
            	<td><span name = "attr_Survival_total">0</span></td>
        	</tr>
        </table>
</div>

<div class = "sheet-currentvals">
    <div class= sheet-row>
        <table>
            <tr class="sheet-labelrow">
                <th>HP</th>
                <th>Hit</th>
                <th>Crit</th>
                <th>Avo</th>
                <th>Ddg</th>
            </tr>
            <tr>
                <td><span name = "attr_HP_current"></span> / <span name = "attr_HP_current_max"> </span></td>
                <td><span name = "attr_Hit">0</span></td>
                <td><span name = "attr_Crit">0</span></td>
                <td><span name = "attr_Avo">0</span></td>
                <td><span name = "attr_Ddg">0</span></td>
            </tr>
        </table>
    </div>
</div>

<div class="sheet-mainstats">
    <div class = "sheet-header"> ATTRIBUTES</div>
    <table>
        <tr class="sheet-labelrow">
            <th></th>
            <th></th>
            <th class="sheet-statlabel">Stats</th>
            <th></th>
            <th></th>
            <th></th>
            <th></th>
            <th>Growths</th>
            <th></th>
            <th></th>
        </tr>
        <tr>
            <th class="sheet-statlabel">Stats</th>
            <th>Class</th>
            <th>Personal</th>
            <th>Buff/Debuff</th>
            <th>Total</th>
            <th class = "sheet-div"> </th>
            <th>Racial</th>
            <th>Class</th>
            <th>Personal</th>
            <th>Total</th>
        </tr>

        <tr class="HP">
            <td class="sheet-statlabel">HP</td>
            <td><span name="attr_HP_sf" value = "0">0</span></td>
            <td><input type= "number" name = "attr_HP_i" value = "0"/></td>
            <td><input type = "number" name = "attr_HP_bd" value = "0"/></td>
            <td><span name="attr_HP_total">0</span></td>
            <td class= "sheet-div"> </td>
            <td><span name = "attr_HP_rg" value = "0">0</span></td>
            <td><span name = "attr_HP_gf" value = "0">0</span> </td>
            <td><input type= "number" name= "attr_HP_gi" value = "0"/></td>
            <td><span name="attr_HP_gtotal">0</span></td>
        </tr>

        <tr class="Str">
            <td class="sheet-statlabel">Str</td>
            <td><span name = "attr_Str_sf" value = "0">0</span></td>
            <td><input name="attr_Str_i" type="number" value = "0"></td>
            <td><input name="attr_Str_bd" type="number" value = "0"></td>
            <td><span name="attr_Str_total">0</span></td>
            <td class="sheet-div"> </td>
            <td><span name = "attr_Str_rg" value = "0">0</span></td>
            <td><span name = "attr_Str_gf" value = "0">0</span></td>
            <td><input name="attr_Str_gi" type="number" value = "0"></td>
            <td><span name="attr_Str_gtotal">0</span></td>
        </tr>

        <tr class="Mag">
            <td class="sheet-statlabel">Mag</td>
            <td><span name = "attr_Mag_sf" value = "0">0</span></td>
            <td><input name="attr_Mag_i" type="number" value = "0"></td>
            <td><input name="attr_Mag_bd" type="number" value = "0"></td>
            <td><span name = "attr_Mag_total">0</span></td>
            <td class="sheet-div"> </td>
            <td><span name = "attr_Mag_rg" value = "0">0</span></td>
            <td><span name = "attr_Mag_gf" value = "0">0</span></td>
            <td><input name="attr_Mag_gi" type="number" value = "0"></td>
            <td><span name="attr_Mag_gtotal">0</span></td>
        </tr>

        <tr class="Skl">
            <td class="sheet-statlabel">Skl</td>
            <td><span name = "attr_Skl_sf" value = "0">0</span></td>
            <td><input name="attr_Skl_i" type="number" value = "0"></td>
            <td><input name="attr_Skl_bd" type="number" value = "0"></td>
            <td><span name = "attr_Skl_total">0</span></td>
            <td class="sheet-div"> </td>
            <td><span name = "attr_Skl_rg" value = "0">0</span></td>
            <td><span name = "attr_Skl_gf" value = "0">0</span></td>
            <td><input name="attr_Skl_gi" type="number" value = "0"></td>
            <td><span name="attr_Skl_gtotal">0</span></td>
        </tr>

        <tr class="Spd">
            <td class="sheet-statlabel">Spd</td>
            <td><span name = "attr_Spd_sf" value = "0">0</span></td>
            <td><input name="attr_Spd_i" type="number" value = "0"></td>
            <td><input name="attr_Spd_bd" type="number" value = "0"></td>
            <td><span name = "attr_Spd_total">0</span></td>
            <td class="sheet-div"> </td>
            <td><span name = "attr_Spd_rg" value = "0">0</span></td>
            <td><span name = "attr_Spd_gf" value = "0">0</span></td>
            <td><input name="attr_Spd_gi" type="number" value = "0"></td>
            <td><span name="attr_Spd_gtotal">0</span></td>
        </tr>

        <tr class="Lck">
            <td class="sheet-statlabel">Lck</td>
            <td><span name = "attr_Lck_sf" value = "0">0</span></td>
            <td><input name="attr_Lck_i" type="number" value = "0"></td>
            <td><input name="attr_Lck_bd" type="number" value = "0"></td>
            <td><span name = "attr_Lck_total">0</span></td>
            <td class="sheet-div"> </td>
            <td><span name = "attr_Lck_rg" value = "0">0</span></td>
            <td><span name = "attr_Lck_gf" value = "0">0</span></td>
            <td><input name="attr_Lck_gi" type="number" value = "0"></td>
            <td><span name="attr_Lck_gtotal">0</span></td>
        </tr>

        <tr class="Def">
            <td class="sheet-statlabel">Def</td>
            <td><span name = "attr_Def_sf" value = "0">0</span></td>
            <td><input name="attr_Def_i" type="number" value = "0"></td>
            <td><input name="attr_Def_bd" type="number" value = "0"></td>
            <td><span name = "attr_Def_total">0</span></td>
            <td class="sheet-div"> </td>
            <td><span name = "attr_Def_rg" value = "0">0</span></td>
            <td><span name = "attr_Def_gf" value = "0">0</span></td>
            <td><input name="attr_Def_gi" type="number" value = "0"></td>
            <td><span name="attr_Def_gtotal">0</span></td>
        </tr>

        <tr class="Res">
            <td class="sheet-statlabel">Res</td>
            <td><span name = "attr_Res_sf" value = "0">0</span></td>
            <td><input name="attr_Res_i" type="number" value = "0"></td>
            <td><input name="attr_Res_bd" type="number" value = "0"></td>
            <td><span name = "attr_Res_total">0</span></td>
            <td class="sheet-div"> </td>
            <td><span name = "attr_Res_rg" value = "0">0</span></td>
            <td><span name = "attr_Res_gf" value = "0">0</span></td>
            <td><input name="attr_Res_gi" type="number" value = "0"></td>
            <td><span name="attr_Res_gtotal">0</span></td>
        </tr>

        <tr class="Mov">
            <td class="sheet-statlabel">Mov</td>
            <td><span name = "attr_Mov_sf" value = "0">0</span></td>
            <td><input name="attr_Mov_i" type="number" value = "0"></td>
            <td><input name="attr_Mov_bd" type="number" value = "0"></td>
            <td><span name = "attr_Mov_total">0</span></td>
            <td class="sheet-div"> </td>
            <td>--</td>
            <td>--</td>
            <td>--</td>
            <td>--</td>
        </tr>
    </table>
</div>
<div class = "sheet-wepprof">
    <div class = "sheet-header">WEAPON RANKS</div>
    <table>
        <tr>
            <th>Weap. Type</th>
            <th>EXP</th>
            <th>Rank</th>
        </tr>
        <input name = "attr_SwordU" value = "1" type = "checkbox" class = "sheet-swordinput hidden" hidden>
        <input name = "attr_LanceU" value = "1" type = "checkbox" class = "sheet-lanceinput hidden" hidden>
        <input name = "attr_AxeU" value = "1" type = "checkbox" class = "sheet-axeinput hidden" hidden>
        <input name = "attr_BowU" value = "1" type = "checkbox" class = "sheet-bowinput hidden" hidden>
        <input name = "attr_DaggerU" value = "1" type = "checkbox" class = "sheet-daggerinput hidden" hidden>
        <input name = "attr_GunU" value = "1" type = "checkbox" class = "sheet-guninput hidden" hidden>
        <input name = "attr_AnimaU" value = "1" type = "checkbox" class = "sheet-animainput hidden" hidden>
        <input name = "attr_LightU" value = "1" type = "checkbox" class = "sheet-lightinput hidden" hidden>
        <input name = "attr_DarkU" value = "1" type = "checkbox" class = "sheet-darkinput hidden" hidden>
        <input name = "attr_StaffU" value = "1" type = "checkbox" class = "sheet-staffinput hidden" hidden>
        <input name = "attr_StoneU" value = "1" type = "checkbox" class = "sheet-stoneinput hidden" hidden>

        <tr class = "sheet-swordsrow">
            <td>Swords</td>
            <td><input type = "number" value = "0" name = "attr_SwordEXP" min = "0" max = "255"></td>
            <td><span name = "attr_Swordrank"></span></td>
        </tr>
        <tr class = "sheet-lancesrow">
            <td>Lances</td>
            <td><input type = "number" value = "0" name = "attr_LanceEXP" min = "0" max = "255"></td>
            <td><span name = "attr_Lancerank"></span></td>
        </tr>
        <tr class = "sheet-axesrow">
            <td>Axes</td>
            <td><input type = "number" value = "0" name = "attr_AxeEXP" min = "0" max = "255"></td>
            <td><span name = "attr_Axerank"></span></td>
        </tr>
        <tr class = "sheet-bowsrow">
            <td>Bows</td>
            <td><input type = "number" value = "0" name = "attr_BowEXP" min = "0" max = "255"></td>
            <td><span name = "attr_Bowrank"></span></td>
        </tr>
        <tr class = "sheet-daggersrow">
            <td>Daggers</td>
            <td><input type = "number" value = "0" name = "attr_DaggerEXP" min = "0" max = "255"></td>
            <td><span name = "attr_Daggerrank"></span></td>
        </tr>
        <tr class = "sheet-gunsrow">
            <td>Crossbows</td>
            <td><input type = "number" value = "0" name = "attr_GunEXP" min = "0" max = "255"></td>
            <td><span name = "attr_Gunrank"></span></td>
        </tr>
        <tr class = "sheet-firerow">
            <td>Fire Anima</td>
            <td><input type = "number" value = "0" name = "attr_FireEXP" min = "0" max = "255"></td>
            <td><span name = "attr_Firerank"></span></td>
        </tr>
        <tr class = "sheet-windrow">
            <td>Wind Anima</td>
            <td><input type = "number" value = "0" name = "attr_WindEXP" min = "0" max = "255"></td>
            <td><span name = "attr_Windrank"></span></td>
        </tr>
        <tr class = "sheet-thunderrow">
            <td>Thunder Anima</td>
            <td><input type = "number" value = "0" name = "attr_ThunderEXP" min = "0" max = "255"></td>
            <td><span name = "attr_Thunderrank"></span></td>
        </tr>
        <tr class = "sheet-lightrow">
            <td>Light Magic</td>
            <td><input type = "number" value = "0" name = "attr_LightEXP" min = "0" max = "255"></td>
            <td><span name = "attr_Lightrank"></span></td>
        </tr>
        <tr class = "sheet-darkrow">
            <td>Dark Magic</td>
            <td><input type = "number" value = "0" name = "attr_DarkEXP" min = "0" max = "255"></td>
            <td><span name = "attr_Darkrank"></span></td>
        </tr>
        <tr class = "sheet-stonesrow">
            <td>Strikes</td>
            <td><input type = "number" value = "0" name = "attr_StoneEXP" min = "0" max = "255"></td>
            <td><span name = "attr_Stonerank"></span></td>
        </tr>
        <tr class = "sheet-stavesrow">
            <td>Staves</td>
            <td><input type = "number" value = "0" name = "attr_StaffEXP" min = "0" max = "255"></td>
            <td><span name = "attr_Staffrank"></span></td>
        </tr>

    </table>
</div>
<div class = "sheet-inventory">
    <div class = "sheet-header">INVENTORY</div>
    <table>
        <tr>
            <th>Name</th>
            <th>Uses</th>
        </tr>
            <tr>
                <td><select name = "attr_item_name0">
                    <option selected> </option>
                    <option>Herb</option>
                    <option>Vulnerary</option>
                    <option>Concoction</option>
                    <option>Elixir</option>
                    <option>Antitoxin</option>
                    <option>Panacea</option>
                    <option>Pure Water</option>
                    <option>Olvi Grass</option>
                    <option>Laguz Stone</option>
                    <option>Laguz Gem</option>
                    <option>Shine Barrier</option>
                    <option>Torch</option>
                    <option>Spectre Card</option>
                    <option>Reaper Card</option>
                    <option>Demon Card</option>
                    <option>Door Key</option>
                    <option>Chest Key</option>
                    <option>Silver Card</option>
                    <option>Red Gem</option>
                    <option>Blue Gem</option>
                    <option>Silver Gem</option>
                    <option>Seraph Robe</option>
                    <option>Energy Drop</option>
                    <option>Spirit Dust</option>
                    <option>Secret Book</option>
                    <option>Speedwing</option>
                    <option>Ashera Icon</option>
                    <option>Dracoshield</option>
                    <option>Talisman</option>
                    <option>Boots</option>
                    <option>Statue Frag</option>
                    <option>Arms Scroll</option>
                    <option>Master Seal</option>
                    <option>Master Crown</option>
                    <option>Holy Crown</option>
                    <option>Satori Sign</option>
                    <option>Rudol Gem</option>
                    <option>Coin</option>
                </select></td>
                <td><input name = "attr_item_uses0" type = "number" min = "0" value = "0"></td>
            </tr>
            <tr>
                <td><select name = "attr_item_name1">
                  <option>Herb</option>
                  <option>Vulnerary</option>
                  <option>Concoction</option>
                  <option>Elixir</option>
                  <option>Antitoxin</option>
                  <option>Panacea</option>
                  <option>Pure Water</option>
                  <option>Olvi Grass</option>
                  <option>Laguz Stone</option>
                  <option>Laguz Gem</option>
                  <option>Shine Barrier</option>
                  <option>Torch</option>
                  <option>Spectre Card</option>
                  <option>Reaper Card</option>
                  <option>Demon Card</option>
                  <option>Door Key</option>
                  <option>Chest Key</option>
                  <option>Silver Card</option>
                  <option>Red Gem</option>
                  <option>Blue Gem</option>
                  <option>Silver Gem</option>
                  <option>Seraph Robe</option>
                  <option>Energy Drop</option>
                  <option>Spirit Dust</option>
                  <option>Secret Book</option>
                  <option>Speedwing</option>
                  <option>Ashera Icon</option>
                  <option>Dracoshield</option>
                  <option>Talisman</option>
                  <option>Boots</option>
                  <option>Statue Frag</option>
                  <option>Arms Scroll</option>
                  <option>Master Seal</option>
                  <option>Master Crown</option>
                  <option>Holy Crown</option>
                  <option>Satori Sign</option>
                  <option>Rudol Gem</option>
                  <option>Coin</option>
                </select></td>
                <td><input name = "attr_item_uses1" type = "number" min = "0" value = "0"></td>
            </tr>
            <tr>
                <td><select name = "attr_item_name2">
                  <option>Herb</option>
                  <option>Vulnerary</option>
                  <option>Concoction</option>
                  <option>Elixir</option>
                  <option>Antitoxin</option>
                  <option>Panacea</option>
                  <option>Pure Water</option>
                  <option>Olvi Grass</option>
                  <option>Laguz Stone</option>
                  <option>Laguz Gem</option>
                  <option>Shine Barrier</option>
                  <option>Torch</option>
                  <option>Spectre Card</option>
                  <option>Reaper Card</option>
                  <option>Demon Card</option>
                  <option>Door Key</option>
                  <option>Chest Key</option>
                  <option>Silver Card</option>
                  <option>Red Gem</option>
                  <option>Blue Gem</option>
                  <option>Silver Gem</option>
                  <option>Seraph Robe</option>
                  <option>Energy Drop</option>
                  <option>Spirit Dust</option>
                  <option>Secret Book</option>
                  <option>Speedwing</option>
                  <option>Ashera Icon</option>
                  <option>Dracoshield</option>
                  <option>Talisman</option>
                  <option>Boots</option>
                  <option>Statue Frag</option>
                  <option>Arms Scroll</option>
                  <option>Master Seal</option>
                  <option>Master Crown</option>
                  <option>Holy Crown</option>
                  <option>Satori Sign</option>
                  <option>Rudol Gem</option>
                  <option>Coin</option>
                </select></td>
                <td><input name = "attr_item_uses2" type = "number" min = "0" value = "0"></td>
            </tr>
    </table>
</div>

<div class = "sheet-weapons">
    <div class = "sheet-header">WEAPONS</div>
    <fieldset class = "repeating_weapons">
        <table>
            <tr>
                <th>Weapon Name</th>
                <th>Type</th>
            </tr>
            <tr class = "sheet-thicc">
                <td><input name = "attr_WName" type = "text"></td>
                <td>
                    <select name = "attr_WType">
                        <option>Sword</option>
                        <option>Lance</option>
                        <option>Axe</option>
                        <option>Bow</option>
                        <option>Dagger</option>
                        <option>Crossbow</option>
                        <option>Fire Magic</option>
                        <option>Wind Magic</option>
                        <option>Thunder Magic</option>
                        <option>Light Magic</option>
                        <option>Dark Magic</option>
                        <option>Strikes</option>
                        <option>Staves</option>
                    </select>
                </td>
            </tr>
        </table>
        <table>
            <tr>
                <th>Rank</th>
                <th>Weight</th>
                <th>Uses</th>
            </tr>
            <tr>
                <td>
                    <select name = "attr_WRank">
                        <option>E</option>
                        <option>D</option>
                        <option>C</option>
                        <option>B</option>
                        <option>A</option>
                        <option>S</option>
                        <option>UU</option>
                    </select>
                </td>
                <td><input type = "number" name = "attr_Wt" value = "0"/></td>
                <td><input type = "number" name = "attr_Uses" value = "1" min = "0"/></td>
            </tr>
        </table>
        <table>
            <tr>
                <th>Might</th>
                <th>Hit</th>
                <th>Crit</th>
                <th>Range</th>
            </tr>
            <tr>
                <td><input type = "number" name = "attr_Mt" value = "0"/></td>
                <td><input type = "number" name = "attr_Hit" value = "0"/></td>
                <td><input type = "number" name = "attr_Crit" value = "0"/></td>
                <td><input type = "number" name = "attr_Range1" value = "0" class = "sheet-range"/><input type = "number" name = "attr_Range2" value = "0" class = "sheet-range"/></td>
            </tr>
        </table>
        <table>
            <tr>
                <th>Strong against:</th>
                <th>AOE</th>
            </tr>
            <tr>
                <td>
                    <select class="sheet-strengths" name="attr_Strengths">
                        <option> </option>
                        <option>Beast</option>
                        <option>Flier</option>
                        <option>Dragon</option>
                        <option>Armor</option>
                        <option>Monster</option>
                        <option>Beast, Flier</option>
                        <option>Beast, Armor</option>
                        <option>Beast, Dragon</option>
                        <option>Beast, Monster</option>
                        <option>Dragon, Flier</option>
                        <option>Dragon, Armor</option>
                        <option>Dragon, Monster</option>
                        <option>Monster, Flier</option>
                        <option>Monster, Armor</option>
                        <option>Armor, Flier</option>
                    </select>
                </td>
                <td>
                    <input name = "attr_AOE" type="number" value = "0">
                </td>
            </tr>
        </table>

    </fieldset>
</div>

<!--The section of the ~forbidden~ inputs. This should always go last.-->
<div class = "hidden">
    <input name="attr_HP_sf" value = "0" hidden>
    <input name="attr_HP_total" value = "0" hidden>
    <input name="attr_HP_rg" value = "0" hidden>
    <input name="attr_HP_gf" value = "0" hidden>
    <input name="attr_HP_gtotal" value = "0" hidden>
    <input name="attr_HP_total_max" value = "0" hidden>
    <input name="attr_HP_current" value = "0" hidden>
    <input name="attr_HP_current_max" value = "0" hidden>
    <input name="attr_Str_sf" value = "0" hidden>
    <input name="attr_Str_total" value = "0" hidden>
    <input name="attr_Str_rg" value = "0" hidden>
    <input name="attr_Str_gf" value = "0" hidden>
    <input name="attr_Str_gtotal" value = "0" hidden>
    <input name="attr_Str_total_max" value = "0" hidden>
    <input name="attr_Mag_sf" value = "0" hidden>
    <input name="attr_Mag_total" value = "0" hidden>
    <input name="attr_Mag_rg" value = "0" hidden>
    <input name="attr_Mag_gf" value = "0" hidden>
    <input name="attr_Mag_gtotal" value = "0" hidden>
    <input name="attr_Mag_total_max" value = "0" hidden>
    <input name="attr_Skl_sf" value = "0" hidden>
    <input name="attr_Skl_total" value = "0" hidden>
    <input name="attr_Skl_rg" value = "0" hidden>
    <input name="attr_Skl_gf" value = "0" hidden>
    <input name="attr_Skl_gtotal" value = "0" hidden>
    <input name="attr_Skl_total_max" value = "0" hidden>
    <input name="attr_Spd_sf" value = "0" hidden>
    <input name="attr_Spd_total" value = "0" hidden>
    <input name="attr_Spd_rg" value = "0" hidden>
    <input name="attr_Spd_gf" value = "0" hidden>
    <input name="attr_Spd_gtotal" value = "0" hidden>
    <input name="attr_Spd_total_max" value = "0" hidden>
    <input name="attr_Lck_sf" value = "0" hidden>
    <input name="attr_Lck_total" value = "0" hidden>
    <input name="attr_Lck_rg" value = "0" hidden>
    <input name="attr_Lck_gf" value = "0" hidden>
    <input name="attr_Lck_gtotal" value = "0" hidden>
    <input name="attr_Lck_total_max" value = "0" hidden>
    <input name="attr_Def_sf" value = "0" hidden>
    <input name="attr_Def_total" value = "0" hidden>
    <input name="attr_Def_rg" value = "0" hidden>
    <input name="attr_Def_gf" value = "0" hidden>
    <input name="attr_Def_gtotal" value = "0" hidden>
    <input name="attr_Def_total_max" value = "0" hidden>
    <input name="attr_Res_sf" value = "0" hidden>
    <input name="attr_Res_total" value = "0" hidden>
    <input name="attr_Res_rg" value = "0" hidden>
    <input name="attr_Res_gf" value = "0" hidden>
    <input name="attr_Res_gtotal" value = "0" hidden>
    <input name="attr_Res_total_max" value = "0" hidden>
    <input name="attr_Mov_sf" value = "0" hidden>
    <input name="attr_Mov_total" value = "0" hidden>
    <input name="attr_Mov_total_max" value = "0" hidden>
    <input name="attr_Athletics_total" value = "0" hidden>
    <input name="attr_Arcana_total" value = "0" hidden>
    <input name="attr_History_total" value = "0" hidden>
    <input name="attr_Investigation_total" value = "0" hidden>
    <input name="attr_Nature_total" value = "0" hidden>
    <input name="attr_Religion_total" value = "0" hidden>
    <input name="attr_Deception_total" value = "0" hidden>
    <input name="attr_Intimidation_total" value = "0" hidden>
    <input name="attr_Performance_total" value = "0" hidden>
    <input name="attr_Persuasion_total" value = "0" hidden>
    <input name="attr_Acrobatics_total" value = "0" hidden>
    <input name="attr_SleightofHand_total" value = "0" hidden>
    <input name="attr_Stealth_total" value = "0" hidden>
    <input name="attr_AnimalHandling_total" value = "0" hidden>
    <input name="attr_Insight_total" value = "0" hidden>
    <input name="attr_Medicine_total" value = "0" hidden>
    <input name="attr_Perception_total" value = "0" hidden>
    <input name="attr_Survival_total" value = "0" hidden>
    <input name="attr_EXP" value = "0" min = "0" max = "100" hidden>
    <input name="attr_Swordrank" value = "E" type = "text" hidden>
    <input name="attr_Lancerank" value = "E" type = "text" hidden>
    <input name="attr_Axerank" value = "E" type = "text" hidden>
    <input name="attr_Bowrank" value = "E" type = "text" hidden>
    <input name="attr_Daggerrank" value = "E" type = "text" hidden>
    <input name="attr_Gunrank" value = "E" type = "text" hidden>
    <input name="attr_Darkrank" value = "E" type = "text" hidden>
    <input name="attr_Lightrank" value = "E" type = "text" hidden>
    <input name="attr_Firerank" value = "E" type = "text" hidden>
    <input name="attr_Windrank" value = "E" type = "text" hidden>
    <input name="attr_Thunderrank" value = "E" type = "text" hidden>
    <input name="attr_Stonerank" value = "E" type = "text" hidden>
    <input name="attr_Staffrank" value = "E" type = "text" hidden>
    <input name="attr_Swordrank" value = "E" type = "text" hidden>
    <input name="attr_Lancerank_max" value = "E" type = "text" hidden>
    <input name="attr_Axerank_max" value = "E" type = "text" hidden>
    <input name="attr_Bowrank_max" value = "E" type = "text" hidden>
    <input name="attr_Daggerrank_max" value = "E" type = "text" hidden>
    <input name="attr_Gunrank_max" value = "E" type = "text" hidden>
    <input name="attr_Darkrank_max" value = "E" type = "text" hidden>
    <input name="attr_Lightrank_max" value = "E" type = "text" hidden>
    <input name="attr_Animarank_max" value = "E" type = "text" hidden>
    <input name="attr_Stonerank_max" value = "E" type = "text" hidden>
    <input name="attr_Staffrank_max" value = "E" type = "text" hidden>
    <input name="attr_Hit" value = "0" hidden>
    <input name="attr_Crit" value = "0" hidden>
    <input name="attr_Avo" value = "0" hidden>
    <!--Firstmost weapon values, excludes hit/crit because that's already calculated-->
    <input name= "attr_Weaknesses" value = "" hidden>
   <input type = "checkbox" value="0" name = "attr_isPromo"/>
   <input name= "attr_fid" value = "" hidden>
   <input name = "attr_f_WRank" value = "" hidden>art 3)
   <input name = "attr_Hitmod" value = "0" hidden>
   <input name = "attr_Critmod" value = "0" hidden>
   <input name = "attr_Avomod" value = "0" hidden>
   <input name = "attr_Ddgmod" value = "0" hidden>
   <input name = "attr_Dmgmod" value = "0" hidden>

   <input name = "attr_UACounter" value = "0" type = "checkbox" hidden>
</div>
<script type="text/worker">
//AAAAA
var getSectionIDsOrdered = function (sectionName, callback) {
  'use strict';
  getAttrs([`_reporder_${sectionName}`], function (v) {
    getSectionIDs(sectionName, function (idArray) {
      let reporderArray = v[`_reporder_${sectionName}`] ? v[`_reporder_${sectionName}`].toLowerCase().split(',') : [],
        ids = [...new Set(reporderArray.filter(x => idArray.includes(x)).concat(idArray))];
      callback(ids);
    });
  });
};

//1st tier class bases
const Ranger = {
  "Name": "Ranger",
  "HP_b": 18,
  "Str_b": 3,
  "Mag_b": 1,
  "Skl_b": 3,
  "Spd_b": 4,
  "Lck_b": 0,
  "Def_b": 5,
  "Res_b": 0,
  "Mov_b": 6,
  "HP_g": 90,
  "Str_g": 45,
  "Mag_g": 20,
  "Skl_g": 30,
  "Spd_g": 45,
  "Lck_g": 40,
  "Def_g": 15,
  "Res_g": 20,
  "HP_c": 40,
  "Str_c": 20,
  "Mag_c": 15,
  "Skl_c": 20,
  "Spd_c": 20,
  "Lck_c": 40,
  "Def_c": 20,
  "Res_c": 20,
  "Mov_c": 6,
  "Weapons": "1",
  "Wepcaps": "A"
}
const Myrmidon = {
  "Name": "Myrmidon",
  "HP_b": 17,
  "Str_b": 4,
  "Mag_b": 5,
  "Skl_b": 6,
  "Spd_b": 0,
  "Lck_b": 3,
  "Def_b": 1,
  "Res_b": 6,
  "Mov_b": 6,
  "HP_g": 65,
  "Str_g": 50,
  "Mag_g": 10,
  "Skl_g": 60,
  "Spd_g": 65,
  "Lck_g": 30,
  "Def_g": 25,
  "Res_g": 30,
  "HP_c": 40,
  "Str_c": 20,
  "Mag_c": 15,
  "Skl_c": 20,
  "Spd_c": 20,
  "Lck_c": 40,
  "Def_c": 20,
  "Res_c": 20,
  "Mov_c": 6,
  "Weapons": "1",
  "Wepcaps": "A"
}
const Soldier = {
  "Name": "Soldier",
  "HP_b": 18,
  "Str_b": 4,
  "Mag_b": 0,
  "Skl_b": 4,
  "Spd_b": 5,
  "Lck_b": 0,
  "Def_b": 4,
  "Res_b": 1,
  "Mov_b": 6,
  "HP_g": 80,
  "Str_g": 40,
  "Mag_g": 15,
  "Skl_g": 50,
  "Spd_g": 50,
  "Lck_g": 25,
  "Def_g": 40,
  "Res_g": 35,
  "HP_c": 40,
  "Str_c": 20,
  "Mag_c": 15,
  "Skl_c": 20,
  "Spd_c": 20,
  "Lck_c": 40,
  "Def_c": 20,
  "Res_c": 20,
  "Mov_c": 6,
  "Weapons": "2",
  "Wepcaps": "A"
}
const Fighter = {
  "Name": "Fighter",
  "HP_b": 24,
  "Str_b": 5,
  "Mag_b": 0,
  "Skl_b": 3,
  "Spd_b": 3,
  "Lck_b": 0,
  "Def_b": 3,
  "Res_b": 0,
  "Mov_b": 6,
  "HP_g": 80,
  "Str_g": 50,
  "Mag_g": 5,
  "Skl_g": 60,
  "Spd_g": 45,
  "Lck_g": 25,
  "Def_g": 40,
  "Res_g": 30,
  "HP_c": 40,
  "Str_c": 20,
  "Mag_c": 15,
  "Skl_c": 20,
  "Spd_c": 20,
  "Lck_c": 40,
  "Def_c": 20,
  "Res_c": 20,
  "Mov_c": 6,
  "Weapons": "3",
  "Wepcaps": "A"
}
const Archer = {
  "Name": "Archer",
  "HP_b": 18,
  "Str_b": 3,
  "Mag_b": 0,
  "Skl_b": 6,
  "Spd_b": 3,
  "Lck_b": 0,
  "Def_b": 4,
  "Res_b": 0,
  "Mov_b": 6,
  "HP_g": 60,
  "Str_g": 40,
  "Mag_g": 10,
  "Skl_g": 60,
  "Spd_g": 55,
  "Lck_g": 30,
  "Def_g": 40,
  "Res_g": 40,
  "HP_c": 40,
  "Str_c": 20,
  "Mag_c": 15,
  "Skl_c": 20,
  "Spd_c": 20,
  "Lck_c": 40,
  "Def_c": 20,
  "Res_c": 20,
  "Mov_c": 6,
  "Weapons": "4",
  "Wepcaps": "A"
}
const Sword_Armor = {
  "Name": "Sword Armor",
  "HP_b": 20,
  "Str_b": 5,
  "Mag_b": 0,
  "Skl_b": 2,
  "Spd_b": 0,
  "Lck_b": 0,
  "Def_b": 9,
  "Res_b": 0,
  "Mov_b": 5,
  "HP_g": 75,
  "Str_g": 50,
  "Mag_g": 20,
  "Skl_g": 45,
  "Spd_g": 30,
  "Lck_g": 25,
  "Def_g": 60,
  "Res_g": 45,
  "HP_c": 40,
  "Str_c": 20,
  "Mag_c": 15,
  "Skl_c": 20,
  "Spd_c": 20,
  "Lck_c": 40,
  "Def_c": 20,
  "Res_c": 20,
  "Mov_c": 5,
  "Weapons": "1",
  "Wepcaps": "A"
}
const Lance_Armor = {
  "Name": "Lance Armor",
  "HP_b": 20,
  "Str_b": 5,
  "Mag_b": 0,
  "Skl_b": 2,
  "Spd_b": 0,
  "Lck_b": 0,
  "Def_b": 9,
  "Res_b": 0,
  "Mov_b": 5,
  "HP_g": 75,
  "Str_g": 50,
  "Mag_g": 20,
  "Skl_g": 45,
  "Spd_g": 30,
  "Lck_g": 25,
  "Def_g": 60,
  "Res_g": 45,
  "HP_c": 40,
  "Str_c": 20,
  "Mag_c": 15,
  "Skl_c": 20,
  "Spd_c": 20,
  "Lck_c": 40,
  "Def_c": 20,
  "Res_c": 20,
  "Mov_c": 5,
  "Weapons": "2",
  "Wepcaps": "A"
}
const Axe_Armor = {
  "Name": "Axe Armor",
  "HP_b": 20,
  "Str_b": 5,
  "Mag_b": 0,
  "Skl_b": 2,
  "Spd_b": 0,
  "Lck_b": 0,
  "Def_b": 9,
  "Res_b": 0,
  "Mov_b": 5,
  "HP_g": 75,
  "Str_g": 50,
  "Mag_g": 20,
  "Skl_g": 45,
  "Spd_g": 30,
  "Lck_g": 25,
  "Def_g": 60,
  "Res_g": 45,
  "HP_c": 40,
  "Str_c": 20,
  "Mag_c": 15,
  "Skl_c": 20,
  "Spd_c": 20,
  "Lck_c": 40,
  "Def_c": 20,
  "Res_c": 20,
  "Mov_c": 5,
  "Weapons": "3",
  "Wepcaps": "A"
}
const Thief = {
  "Name": "Thief",
  "HP_b": 16,
  "Str_b": 3,
  "Mag_b": 0,
  "Skl_b": 2,
  "Spd_b": 9,
  "Lck_b": 0,
  "Def_b": 2,
  "Res_b": 0,
  "Mov_b": 7,
  "HP_g": 70,
  "Str_g": 45,
  "Mag_g": 15,
  "Skl_g": 60,
  "Spd_g": 60,
  "Lck_g": 40,
  "Def_g": 30,
  "Res_g": 20,
  "HP_c": 40,
  "Str_c": 20,
  "Mag_c": 15,
  "Skl_c": 20,
  "Spd_c": 20,
  "Lck_c": 40,
  "Def_c": 20,
  "Res_c": 20,
  "Mov_c": 5,
  "Weapons": "5",
  "Wepcaps": "A"
}
const Fire_Mage = {
  "Name": "Fire Mage",
  "HP_b": 16,
  "Str_b": 0,
  "Mag_b": 3,
  "Skl_b": 2,
  "Spd_b": 5,
  "Lck_b": 0,
  "Def_b": 2,
  "Res_b": 5,
  "Mov_b": 5,
  "HP_g": 60,
  "Str_g": 20,
  "Mag_g": 65,
  "Skl_g": 50,
  "Spd_g": 55,
  "Lck_g": 20,
  "Def_g": 30,
  "Res_g": 65,
  "HP_c": 40,
  "Str_c": 20,
  "Mag_c": 15,
  "Skl_c": 20,
  "Spd_c": 20,
  "Lck_c": 40,
  "Def_c": 20,
  "Res_c": 20,
  "Mov_c": 5,
  "Weapons": "7",
  "Wepcaps": "A"
}
const Thunder_Mage = {
  "Name": "Thunder Mage",
  "HP_b": 16,
  "Str_b": 1,
  "Mag_b": 4,
  "Skl_b": 3,
  "Spd_b": 4,
  "Lck_b": 0,
  "Def_b": 1,
  "Res_b": 5,
  "Mov_b": 5,
  "HP_g": 60,
  "Str_g": 20,
  "Mag_g": 65,
  "Skl_g": 50,
  "Spd_g": 55,
  "Lck_g": 20,
  "Def_g": 30,
  "Res_g": 65,
  "HP_c": 40,
  "Str_c": 20,
  "Mag_c": 15,
  "Skl_c": 20,
  "Spd_c": 20,
  "Lck_c": 40,
  "Def_c": 20,
  "Res_c": 20,
  "Mov_c": 5,
  "Weapons": "9",
  "Wepcaps": "A"
}
const Wind_Mage = {
  "Name": "Wind Mage",
  "HP_b": 16,
  "Str_b": 0,
  "Mag_b": 2,
  "Skl_b": 6,
  "Spd_b": 7,
  "Lck_b": 0,
  "Def_b": 2,
  "Res_b": 6,
  "Mov_b": 5,
  "HP_g": 60,
  "Str_g": 20,
  "Mag_g": 65,
  "Skl_g": 50,
  "Spd_g": 55,
  "Lck_g": 20,
  "Def_g": 30,
  "Res_g": 65,
  "HP_c": 40,
  "Str_c": 20,
  "Mag_c": 15,
  "Skl_c": 20,
  "Spd_c": 20,
  "Lck_c": 40,
  "Def_c": 20,
  "Res_c": 20,
  "Mov_c": 5,
  "Weapons": "8",
  "Wepcaps": "A"
}
const Light_Mage = {
  "Name": "Light Mage",
  "HP_b": 16,
  "Str_b": 0,
  "Mag_b": 4,
  "Skl_b": 5,
  "Spd_b": 5,
  "Lck_b": 0,
  "Def_b": 1,
  "Res_b": 7,
  "Mov_b": 5,
  "HP_g": 60,
  "Str_g": 20,
  "Mag_g": 65,
  "Skl_g": 50,
  "Spd_g": 55,
  "Lck_g": 20,
  "Def_g": 30,
  "Res_g": 65,
  "HP_c": 40,
  "Str_c": 20,
  "Mag_c": 15,
  "Skl_c": 20,
  "Spd_c": 20,
  "Lck_c": 40,
  "Def_c": 20,
  "Res_c": 20,
  "Mov_c": 5,
  "Weapons": "10",
  "Wepcaps": "A"
}
const Priest = {
  "Name": "Priest",
  "HP_b": 18,
  "Str_b": 0,
  "Mag_b": 3,
  "Skl_b": 3,
  "Spd_b": 3,
  "Lck_b": 0,
  "Def_b": 1,
  "Res_b": 8,
  "Mov_b": 5,
  "HP_g": 55,
  "Str_g": 15,
  "Mag_g": 55,
  "Skl_g": 25,
  "Spd_g": 40,
  "Lck_g": 50,
  "Def_g": 0,
  "Res_g": 60,
  "HP_c": 40,
  "Str_c": 20,
  "Mag_c": 15,
  "Skl_c": 20,
  "Spd_c": 20,
  "Lck_c": 40,
  "Def_c": 20,
  "Res_c": 20,
  "Mov_c": 5,
  "Weapons": "13",
  "Wepcaps": "A"
}
const Cleric = {
  "Name": "Cleric",
  "HP_b": 17,
  "Str_b": 2,
  "Mag_b": 1,
  "Skl_b": 2,
  "Spd_b": 2,
  "Lck_b": 0,
  "Def_b": 0,
  "Res_b": 6,
  "Mov_b": 5,
  "HP_g": 50,
  "Str_g": 15,
  "Mag_g": 45,
  "Skl_g": 40,
  "Spd_g": 50,
  "Lck_g": 45,
  "Def_g": 10,
  "Res_g": 50,
  "HP_c": 40,
  "Str_c": 20,
  "Mag_c": 15,
  "Skl_c": 20,
  "Spd_c": 20,
  "Lck_c": 40,
  "Def_c": 20,
  "Res_c": 20,
  "Mov_c": 5,
  "Weapons": "13",
  "Wepcaps": "A"
}
const Sword_Knight = {
  "Name": "Sword Knight",
  "HP_b": 20,
  "Str_b": 5,
  "Mag_b": 0,
  "Skl_b": 2,
  "Spd_b": 6,
  "Lck_b": 0,
  "Def_b": 5,
  "Res_b": 1,
  "Mov_b": 8,
  "HP_g": 80,
  "Str_g": 20,
  "Mag_g": 15,
  "Skl_g": 20,
  "Spd_g": 20,
  "Lck_g": 40,
  "Def_g": 20,
  "Res_g": 20,
  "HP_c": 40,
  "Str_c": 20,
  "Mag_c": 15,
  "Skl_c": 20,
  "Spd_c": 20,
  "Lck_c": 40,
  "Def_c": 20,
  "Res_c": 20,
  "Mov_c": 8,
  "Weapons": "1",
  "Wepcaps": "A"
}
const Lance_Knight = {
  "Name": "Lance Knight",
  "HP_b": 20,
  "Str_b": 5,
  "Mag_b": 0,
  "Skl_b": 2,
  "Spd_b": 6,
  "Lck_b": 0,
  "Def_b": 5,
  "Res_b": 1,
  "Mov_b": 8,
  "HP_g": 80,
  "Str_g": 20,
  "Mag_g": 15,
  "Skl_g": 20,
  "Spd_g": 20,
  "Lck_g": 40,
  "Def_g": 20,
  "Res_g": 20,
  "HP_c": 40,
  "Str_c": 20,
  "Mag_c": 15,
  "Skl_c": 20,
  "Spd_c": 20,
  "Lck_c": 40,
  "Def_c": 20,
  "Res_c": 20,
  "Mov_c": 8,
  "Weapons": "2",
  "Wepcaps": "A"
}
const Axe_Knight = {
  "Name": "Axe Knight",
  "HP_b": 20,
  "Str_b": 5,
  "Mag_b": 0,
  "Skl_b": 2,
  "Spd_b": 6,
  "Lck_b": 0,
  "Def_b": 5,
  "Res_b": 1,
  "Mov_b": 8,
  "HP_g": 80,
  "Str_g": 20,
  "Mag_g": 15,
  "Skl_g": 20,
  "Spd_g": 20,
  "Lck_g": 40,
  "Def_g": 20,
  "Res_g": 20,
  "HP_c": 40,
  "Str_c": 20,
  "Mag_c": 15,
  "Skl_c": 20,
  "Spd_c": 20,
  "Lck_c": 40,
  "Def_c": 20,
  "Res_c": 20,
  "Mov_c": 8,
  "Weapons": "3",
  "Wepcaps": "A"
}
const Bow_Knight = {
  "Name": "Bow Knight",
  "HP_b": 20,
  "Str_b": 5,
  "Mag_b": 0,
  "Skl_b": 2,
  "Spd_b": 6,
  "Lck_b": 0,
  "Def_b": 5,
  "Res_b": 1,
  "Mov_b": 8,
  "HP_g": 80,
  "Str_g": 20,
  "Mag_g": 15,
  "Skl_g": 20,
  "Spd_g": 20,
  "Lck_g": 40,
  "Def_g": 20,
  "Res_g": 20,
  "HP_c": 40,
  "Str_c": 20,
  "Mag_c": 15,
  "Skl_c": 20,
  "Spd_c": 20,
  "Lck_c": 40,
  "Def_c": 20,
  "Res_c": 20,
  "Mov_c": 8,
  "Weapons": "4",
  "Wepcaps": "A"
}
const Pegasus_Knight = {
  "Name": "Pegasus Knight",
  "HP_b": 14,
  "Str_b": 4,
  "Mag_b": 0,
  "Skl_b": 4,
  "Spd_b": 8,
  "Lck_b": 0,
  "Def_b": 3,
  "Res_b": 2,
  "Mov_b": 8,
  "HP_g": 65,
  "Str_g": 40,
  "Mag_g": 20,
  "Skl_g": 55,
  "Spd_g": 55,
  "Lck_g": 35,
  "Def_g": 35,
  "Res_g": 50,
  "HP_c": 40,
  "Str_c": 20,
  "Mag_c": 15,
  "Skl_c": 20,
  "Spd_c": 20,
  "Lck_c": 40,
  "Def_c": 20,
  "Res_c": 20,
  "Mov_c": 8,
  "Weapons": "2",
  "Wepcaps": "A"
}
const Dracoknight = {
  "Name": "Dracoknight",
  "HP_b": 19,
  "Str_b": 6,
  "Mag_b": 0,
  "Skl_b": 4,
  "Spd_b": 3,
  "Lck_b": 0,
  "Def_b": 8,
  "Res_b": 2,
  "Mov_b": 8,
  "HP_g": 80,
  "Str_g": 65,
  "Mag_g": 25,
  "Skl_g": 55,
  "Spd_g": 65,
  "Lck_g": 30,
  "Def_g": 45,
  "Res_g": 30,
  "HP_c": 40,
  "Str_c": 20,
  "Mag_c": 15,
  "Skl_c": 20,
  "Spd_c": 20,
  "Lck_c": 40,
  "Def_c": 20,
  "Res_c": 20,
  "Mov_c": 8,
  "Weapons": "2",
  "Wepcaps": "A"
}
const Lion = {
  "Name": "Lion",
  "HP_b": 30,
  "Str_b": 10,
  "Mag_b": 2,
  "Skl_b": 7,
  "Spd_b": 8,
  "Lck_b": 0,
  "Def_b": 10,
  "Res_b": 2,
  "Mov_b": 7,
  "HP_g": 140,
  "Str_g": 70,
  "Mag_g": 10,
  "Skl_g": 80,
  "Spd_g": 70,
  "Lck_g": 30,
  "Def_g": 70,
  "Res_g": 60,
  "HP_c": 80,
  "Str_c": 32,
  "Mag_c": 20,
  "Skl_c": 35,
  "Spd_c": 33,
  "Lck_c": 40,
  "Def_c": 35,
  "Res_c": 27,
  "Mov_c": 7,
  "Weapons": "12",
  "Wepcaps": "S"
}
const Lion_T = {
  "Name": "Lion",
  "HP_b": 30,
  "Str_b": 18,
  "Mag_b": 2,
  "Skl_b": 11,
  "Spd_b": 11,
  "Lck_b": 0,
  "Def_b": 15,
  "Res_b": 5,
  "Mov_b": 9,
  "HP_g": 140,
  "Str_g": 70,
  "Mag_g": 10,
  "Skl_g": 80,
  "Spd_g": 70,
  "Lck_g": 30,
  "Def_g": 70,
  "Res_g": 60,
  "HP_c": 80,
  "Str_c": 40,
  "Mag_c": 20,
  "Skl_c": 39,
  "Spd_c": 36,
  "Lck_c": 40,
  "Def_c": 40,
  "Res_c": 30,
  "Mov_c": 9,
  "Weapons": "12",
  "Wepcaps": "S"
}
const Tiger = {
  "Name": "Tiger",
  "HP_b": 28,
  "Str_b": 8,
  "Mag_b": 2,
  "Skl_b": 6,
  "Spd_b": 7,
  "Lck_b": 0,
  "Def_b": 7,
  "Res_b": 2,
  "Mov_b": 7,
  "HP_g": 135,
  "Str_g": 70,
  "Mag_g": 10,
  "Skl_g": 70,
  "Spd_g": 65,
  "Lck_g": 30,
  "Def_g": 70,
  "Res_g": 35,
  "HP_c": 75,
  "Str_c": 30,
  "Mag_c": 20,
  "Skl_c": 33,
  "Spd_c": 34,
  "Lck_c": 40,
  "Def_c": 30,
  "Res_c": 24,
  "Mov_c": 7,
  "Weapons": "12",
  "Wepcaps": "S"
}
const Tiger_T = {
  "Name": "Tiger",
  "HP_b": 28,
  "Str_b": 15,
  "Mag_b": 2,
  "Skl_b": 10,
  "Spd_b": 10,
  "Lck_b": 0,
  "Def_b": 10,
  "Res_b": 5,
  "Mov_b": 9,
  "HP_g": 135,
  "Str_g": 70,
  "Mag_g": 10,
  "Skl_g": 70,
  "Spd_g": 65,
  "Lck_g": 30,
  "Def_g": 70,
  "Res_g": 35,
  "HP_c": 75,
  "Str_c": 37,
  "Mag_c": 20,
  "Skl_c": 37,
  "Spd_c": 37,
  "Lck_c": 40,
  "Def_c": 35,
  "Res_c": 27,
  "Mov_c": 9,
  "Weapons": "12",
  "Wepcaps": "S"
}
const Cat = {
  "Name": "Cat",
  "HP_b": 26,
  "Str_b": 6,
  "Mag_b": 4,
  "Skl_b": 6,
  "Spd_b": 8,
  "Lck_b": 0,
  "Def_b": 4,
  "Res_b": 2,
  "Mov_b": 7,
  "HP_g": 130,
  "Str_g": 70,
  "Mag_g": 10,
  "Skl_g": 65,
  "Spd_g": 75,
  "Lck_g": 30,
  "Def_g": 65,
  "Res_g": 40,
  "HP_c": 70,
  "Str_c": 29,
  "Mag_c": 20,
  "Skl_c": 34,
  "Spd_c": 35,
  "Lck_c": 40,
  "Def_c": 30,
  "Res_c": 24,
  "Mov_c": 7,
  "Weapons": "12",
  "Wepcaps": "S"
}
const Cat_T = {
  "Name": "Cat",
  "HP_b": 26,
  "Str_b": 12,
  "Mag_b": 4,
  "Skl_b": 10,
  "Spd_b": 11,
  "Lck_b": 0,
  "Def_b": 9,
  "Res_b": 5,
  "Mov_b": 9,
  "HP_g": 130,
  "Str_g": 70,
  "Mag_g": 10,
  "Skl_g": 65,
  "Spd_g": 75,
  "Lck_g": 30,
  "Def_g": 65,
  "Res_g": 40,
  "HP_c": 70,
  "Str_c": 35,
  "Mag_c": 20,
  "Skl_c": 38,
  "Spd_c": 38,
  "Lck_c": 40,
  "Def_c": 35,
  "Res_c": 27,
  "Mov_c": 9,
  "Weapons": "12",
  "Wepcaps": "S"
}
const Wolf = { //no wolves in PoR so they're really janky lmaoo
  "Name": "Wolf",
  "HP_b": 32,
  "Str_b": 9,
  "Mag_b": 2,
  "Skl_b": 8,
  "Spd_b": 9,
  "Lck_b": 0,
  "Def_b": 8,
  "Res_b": 3,
  "Mov_b": 7,
  "HP_g": 95,
  "Str_g": 50,
  "Mag_g": 10,
  "Skl_g": 65,
  "Spd_g": 70,
  "Lck_g": 70,
  "Def_g": 30,
  "Res_g": 35,
  "HP_c": 75,
  "Str_c": 30,
  "Mag_c": 20,
  "Skl_c": 33,
  "Spd_c": 34,
  "Lck_c": 40,
  "Def_c": 15,
  "Res_c": 24,
  "Mov_c": 7,
  "Weapons": "12",
  "Wepcaps": "S"
}
const Wolf_T = {
  "Name": "Wolf",
  "HP_b": 32,
  "Str_b": 14,
  "Mag_b": 4,
  "Skl_b": 16,
  "Spd_b": 18,
  "Lck_b": 0,
  "Def_b": 13,
  "Res_b": 8,
  "Mov_b": 7,
  "HP_g": 95,
  "Str_g": 50,
  "Mag_g": 10,
  "Skl_g": 65,
  "Spd_g": 70,
  "Lck_g": 70,
  "Def_g": 30,
  "Res_g": 35,
  "HP_c": 75,
  "Str_c": 40,
  "Mag_c": 27,
  "Skl_c": 45,
  "Spd_c": 36,
  "Lck_c": 40,
  "Def_c": 30,
  "Res_c": 26,
  "Mov_c": 7,
  "Weapons": "12",
  "Wepcaps": "S"
}
const Hawk = {
  "Name": "Hawk",
  "HP_b": 26,
  "Str_b": 6,
  "Mag_b": 2,
  "Skl_b": 6,
  "Spd_b": 8,
  "Lck_b": 0,
  "Def_b": 5,
  "Res_b": 3,
  "Mov_b": 7,
  "HP_g": 120,
  "Str_g": 55,
  "Mag_g": 10,
  "Skl_g": 70,
  "Spd_g": 65,
  "Lck_g": 30,
  "Def_g": 45,
  "Res_g": 35,
  "HP_c": 65,
  "Str_c": 26,
  "Mag_c": 20,
  "Skl_c": 35,
  "Spd_c": 36,
  "Lck_c": 40,
  "Def_c": 26,
  "Res_c": 26,
  "Mov_c": 7,
  "Weapons": "12",
  "Wepcaps": "S"
}
const Hawk_T = {
  "Name": "Hawk",
  "HP_b": 26,
  "Str_b": 12,
  "Mag_b": 2,
  "Skl_b": 11,
  "Spd_b": 11,
  "Lck_b": 0,
  "Def_b": 9,
  "Res_b": 5,
  "Mov_b": 9,
  "HP_g": 120,
  "Str_g": 55,
  "Mag_g": 10,
  "Skl_g": 70,
  "Spd_g": 65,
  "Lck_g": 30,
  "Def_g": 45,
  "Res_g": 35,
  "HP_c": 65,
  "Str_c": 32,
  "Mag_c": 20,
  "Skl_c": 40,
  "Spd_c": 39,
  "Lck_c": 40,
  "Def_c": 30,
  "Res_c": 30,
  "Mov_c": 9,
  "Weapons": "12",
  "Wepcaps": "S"
}
const Raven = {
  "Name": "Raven",
  "HP_b": 24,
  "Str_b": 4,
  "Mag_b": 3,
  "Skl_b": 6,
  "Spd_b": 8,
  "Lck_b": 0,
  "Def_b": 5,
  "Res_b": 3,
  "Mov_b": 6,
  "HP_g": 110,
  "Str_g": 55,
  "Mag_g": 15,
  "Skl_g": 60,
  "Spd_g": 80,
  "Lck_g": 25,
  "Def_g": 35,
  "Res_g": 35,
  "HP_c": 65,
  "Str_c": 25,
  "Mag_c": 20,
  "Skl_c": 31,
  "Spd_c": 34,
  "Lck_c": 40,
  "Def_c": 25,
  "Res_c": 31,
  "Mov_c": 6,
  "Weapons": "12",
  "Wepcaps": "S"
}
const Raven_T = {
  "Name": "Raven",
  "HP_b": 24,
  "Str_b": 9,
  "Mag_b": 4,
  "Skl_b": 10,
  "Spd_b": 12,
  "Lck_b": 0,
  "Def_b": 8,
  "Res_b": 7,
  "Mov_b": 8,
  "HP_g": 110,
  "Str_g": 55,
  "Mag_g": 15,
  "Skl_g": 60,
  "Spd_g": 80,
  "Lck_g": 25,
  "Def_g": 35,
  "Res_g": 35,
  "HP_c": 65,
  "Str_c": 30,
  "Mag_c": 21,
  "Skl_c": 35,
  "Spd_c": 38,
  "Lck_c": 40,
  "Def_c": 28,
  "Res_c": 35,
  "Mov_c": 8,
  "Weapons": "12",
  "Wepcaps": "S"
}
const Heron = {
  "Name": "Heron",
  "HP_b": 18,
  "Str_b": 0,
  "Mag_b": 5,
  "Skl_b": 3,
  "Spd_b": 7,
  "Lck_b": 0,
  "Def_b": 2,
  "Res_b": 13,
  "Mov_b": 5,
  "HP_g": 50,
  "Str_g": 20,
  "Mag_g": 55,
  "Skl_g": 50,
  "Spd_g": 40,
  "Lck_g": 40,
  "Def_g": 15,
  "Res_g": 50,
  "HP_c": 60,
  "Str_c": 10,
  "Mag_c": 20,
  "Skl_c": 17,
  "Spd_c": 26,
  "Lck_c": 40,
  "Def_c": 15,
  "Res_c": 35,
  "Mov_c": 5,
  "Weapons": "",
  "Wepcaps": "S"
}
const Heron_T = {
  "Name": "Heron",
  "HP_b": 18,
  "Str_b": 0,
  "Mag_b": 10,
  "Skl_b": 6,
  "Spd_b": 11,
  "Lck_b": 0,
  "Def_b": 3,
  "Res_b": 20,
  "Mov_b": 8,
  "HP_g": 50,
  "Str_g": 20,
  "Mag_g": 55,
  "Skl_g": 50,
  "Spd_g": 40,
  "Lck_g": 40,
  "Def_g": 15,
  "Res_g": 50,
  "HP_c": 60,
  "Str_c": 10,
  "Mag_c": 25,
  "Skl_c": 20,
  "Spd_c": 30,
  "Lck_c": 40,
  "Def_c": 16,
  "Res_c": 40,
  "Mov_c": 8,
  "Weapons": "",
  "Wepcaps": "S"
}
const Red_Dragon = {
  "Name": "Red Dragon",
  "HP_b": 35,
  "Str_b": 15,
  "Mag_b": 5,
  "Skl_b": 6,
  "Spd_b": 7,
  "Lck_b": 0,
  "Def_b": 14,
  "Res_b": 13,
  "Mov_b": 5,
  "HP_g": 145,
  "Str_g": 80,
  "Mag_g": 10,
  "Skl_g": 70,
  "Spd_g": 70,
  "Lck_g": 30,
  "Def_g": 80,
  "Res_g": 55,
  "HP_c": 75,
  "Str_c": 35,
  "Mag_c": 20,
  "Skl_c": 31,
  "Spd_c": 31,
  "Lck_c": 40,
  "Def_c": 36,
  "Res_c": 30,
  "Mov_c": 5,
  "Weapons": "12",
  "Wepcaps": "S"
}
const Red_Dragon_T = {
  "Name": "Red Dragon",
  "HP_b": 35,
  "Str_b": 25,
  "Mag_b": 5,
  "Skl_b": 12,
  "Spd_b": 10,
  "Lck_b": 0,
  "Def_b": 18,
  "Res_b": 18,
  "Mov_b": 6,
  "HP_g": 145,
  "Str_g": 80,
  "Mag_g": 10,
  "Skl_g": 70,
  "Spd_g": 70,
  "Lck_g": 30,
  "Def_g": 80,
  "Res_g": 55,
  "HP_c": 75,
  "Str_c": 40,
  "Mag_c": 20,
  "Skl_c": 35,
  "Spd_c": 35,
  "Lck_c": 40,
  "Def_c": 40,
  "Res_c": 35,
  "Mov_c": 6,
  "Weapons": "12",
  "Wepcaps": "S"
}
const White_Dragon = {
  "Name": "White Dragon",
  "HP_b": 30,
  "Str_b": 10,
  "Mag_b": 5,
  "Skl_b": 7,
  "Spd_b": 5,
  "Lck_b": 0,
  "Def_b": 10,
  "Res_b": 20,
  "Mov_b": 5,
  "HP_g": 130,
  "Str_g": 70,
  "Mag_g": 10,
  "Skl_g": 75,
  "Spd_g": 70,
  "Lck_g": 30,
  "Def_g": 80,
  "Res_g": 80,
  "HP_c": 80,
  "Str_c": 30,
  "Mag_c": 25,
  "Skl_c": 30,
  "Spd_c": 32,
  "Lck_c": 40,
  "Def_c": 35,
  "Res_c": 35,
  "Mov_c": 5,
  "Weapons": "12",
  "Wepcaps": "S"
}
const White_Dragon_T = {
  "Name": "White Dragon",
  "HP_b": 30,
  "Str_b": 20,
  "Mag_b": 5,
  "Skl_b": 12,
  "Spd_b": 8,
  "Lck_b": 0,
  "Def_b": 15,
  "Res_b": 25,
  "Mov_b": 6,
  "HP_g": 130,
  "Str_g": 70,
  "Mag_g": 10,
  "Skl_g": 75,
  "Spd_g": 70,
  "Lck_g": 30,
  "Def_g": 80,
  "Res_g": 80,
  "HP_c": 80,
  "Str_c": 40,
  "Mag_c": 25,
  "Skl_c": 36,
  "Spd_c": 35,
  "Lck_c": 40,
  "Def_c": 40,
  "Res_c": 40,
  "Mov_c": 6,
  "Weapons": "12",
  "Wepcaps": "S"
}
//sword = 1, lance = 2, axe = 3, bow = 4, dagger = 5, crossb = 6, fire = 7, wind = 8, thunder = 9, light = 10, dark = 1,, strike = 12, staff = 13
//2nd tier class bases

//3rd tier class bases

const unPr_classList = [ Archer, Apothecary, Cavalier, Cleric, Dark_Mage, Fighter, Griffin_Rider, Kitsune, Knight, Lord, Anima_Mage, Mercenary, Light_Mage, Myrmidon, Ninja, Pegasus_Knight, Oni_Savage, Soldier, Thief, Troubadour, Villager, Wolfskin, Wyvern_Rider, Dancer, Manakete, Laguz, Ballistician, Dread_Fighter, Lodestar, Vanguard, Witch, Tactician, Rifleman];
const Pr_classList = [Sniper, Bow_Knight, Merchant, Mechanist, Paladin, Great_Knight, War_Cleric, Sage, Druid, Dark_Knight, Warrior, Hero, Griffin_Lord, Light_Flier, Ninetails, General, Great_Lord, Basara, Swordmaster, Assassin, Master_Ninja, Falcon_Knight, Dark_Flier, Halberdier, Trickster, Noble, Valkyrie, Master_of_Arms, Wolfssegner, Managarm, Great_Laguz, Wyvern_Lord, Revenant_Knight, Grandmaster, Gunslinger, Hunter, Berserker];

let classIndex = 0;
let classType = "";
let weps;
let wepcaps;
let attrs;

//racial growths
const r_names = ["Human","Manakete","Half-Manakete","Kitsune","Half-Kitsune","Wolfskin","Half-Wolfskin","Laguz","Half-Laguz","Monster","Other"];
const r_HP_g = [0,20,20,0,0,25,25,15,15,15,0];
const r_Str_g = [0,10,10,10,10,20,20,10,10,10,0];
const r_Mag_g = [0,-10,-10,-15,-15,-20,-20,-10,-10,-10,0];
const r_Skl_g = [0,-10,-10,0,0,-5,-5,10,10,10,0];
const r_Spd_g = [0,-10,-10,10,10,0,0,10,10,10,0];
const r_Lck_g = [0,20,20,20,20,0,0,0,0,0,0];
const r_Def_g = [0,10,10,-10,-10,10,10,0,0,0,0];
const r_Res_g = [0,0,0,10,10,-5,-5,-10,-10,-10,0];

on("change:class", function(eventInfo) {
    //Actual code
    let currentclass = eventInfo.newValue;
    log(currentclass)
    for (var a in unPr_classList){
        if (currentclass == unPr_classList[a].Name){
            classIndex = a;
            classType = "unpr"
        } else if (Laguz_alt.indexOf(currentclass) != -1){
            classIndex = 25;
            classType = "unpr"
        } else if (currentclass == "Ranger"){
            classIndex = 9;
            classType = "unpr"
        } else if (currentclass == "Acrobat"){
            classIndex = 14;
            classType = "unpr"
        }
    }
    for (var b in Pr_classList){
        if (currentclass == Pr_classList[b].Name){
            classIndex = b;
            classType = "pr"
        } else if (GLaguz_alt.indexOf(currentclass) != -1){
            classIndex = 30;
            classType = "pr"
        } else if (currentclass == "Ranger Knight"){
            classIndex = 16;
            classType = "pr"
        } else if (currentclass == "Performer"){
            classIndex = 20;
            classType = "pr"
        }
    }
    console.log(classType)
    console.log(classIndex)
    if (classType == "unpr"){
        attrs = {};
        attrs.HP_sf = unPr_classList[classIndex].HP_b;
        attrs.HP_gf = unPr_classList[classIndex].HP_g;
        attrs.HP_total_max = unPr_classList[classIndex].HP_c;
        attrs.Str_sf = unPr_classList[classIndex].Str_b;
        attrs.Str_gf = unPr_classList[classIndex].Str_g;
        attrs.Str_total_max = unPr_classList[classIndex].Str_c;
        attrs.Mag_sf = unPr_classList[classIndex].Mag_b;
        attrs.Mag_gf = unPr_classList[classIndex].Mag_g;
        attrs.Mag_total_max = unPr_classList[classIndex].Mag_c;
        attrs.Skl_sf = unPr_classList[classIndex].Skl_b;
        attrs.Skl_gf = unPr_classList[classIndex].Skl_g;
        attrs.Skl_total_max = unPr_classList[classIndex].Skl_c;
        attrs.Spd_sf = unPr_classList[classIndex].Spd_b;
        attrs.Spd_gf = unPr_classList[classIndex].Spd_g;
        attrs.Spd_total_max = unPr_classList[classIndex].Spd_c;
        attrs.Lck_sf = unPr_classList[classIndex].Lck_b;
        attrs.Lck_gf = unPr_classList[classIndex].Lck_g;
        attrs.Lck_total_max = unPr_classList[classIndex].Lck_c;
        attrs.Def_sf = unPr_classList[classIndex].Def_b;
        attrs.Def_gf = unPr_classList[classIndex].Def_g;
        attrs.Def_total_max = unPr_classList[classIndex].Def_c;
        attrs.Res_sf = unPr_classList[classIndex].Res_b;
        attrs.Res_gf = unPr_classList[classIndex].Res_g;
        attrs.Res_total_max = unPr_classList[classIndex].Res_c;
        attrs.Mov_sf = unPr_classList[classIndex].Mov_b;
        attrs.Mov_total_max = unPr_classList[classIndex].Mov_c;
        attrs.isPromo = 0;
        console.log(attrs);
        setAttrs(attrs);
        weps = unPr_classList[classIndex].Weapons.split(" ");
        wepcaps = unPr_classList[classIndex].Wepcaps.split(" ");
    } else if (classType = "pr"){
        attrs = {};
        attrs.HP_sf = Pr_classList[classIndex].HP_b;
        attrs.HP_gf = Pr_classList[classIndex].HP_g;
        attrs.HP_total_max = Pr_classList[classIndex].HP_c;
        attrs.Str_sf = Pr_classList[classIndex].Str_b;
        attrs.Str_gf = Pr_classList[classIndex].Str_g;
        attrs.Str_total_max = Pr_classList[classIndex].Str_c;
        attrs.Mag_sf = Pr_classList[classIndex].Mag_b;
        attrs.Mag_gf = Pr_classList[classIndex].Mag_g;
        attrs.Mag_total_max = Pr_classList[classIndex].Mag_c;
        attrs.Skl_sf = Pr_classList[classIndex].Skl_b;
        attrs.Skl_gf = Pr_classList[classIndex].Skl_g;
        attrs.Skl_total_max = Pr_classList[classIndex].Skl_c;
        attrs.Spd_sf = Pr_classList[classIndex].Spd_b;
        attrs.Spd_gf = Pr_classList[classIndex].Spd_g;
        attrs.Spd_total_max = Pr_classList[classIndex].Spd_c;
        attrs.Lck_sf = Pr_classList[classIndex].Lck_b;
        attrs.Lck_gf = Pr_classList[classIndex].Lck_g;
        attrs.Lck_total_max = Pr_classList[classIndex].Lck_c;
        attrs.Def_sf = Pr_classList[classIndex].Def_b;
        attrs.Def_gf = Pr_classList[classIndex].Def_g;
        attrs.Def_total_max = Pr_classList[classIndex].Def_c;
        attrs.Res_sf = Pr_classList[classIndex].Res_b;
        attrs.Res_gf = Pr_classList[classIndex].Res_g;
        attrs.Res_total_max = Pr_classList[classIndex].Res_c;
        attrs.Mov_sf = Pr_classList[classIndex].Mov_b;
        attrs.Mov_total_max = Pr_classList[classIndex].Mov_c;
        attrs.isPromo = 1;
        console.log(attrs);
        setAttrs(attrs);
        weps = Pr_classList[classIndex].Weapons.split(" ");
        wepcaps = Pr_classList[classIndex].Wepcaps.split(" ");
    }
    console.log("Stats set for " + currentclass+"! Class index is "+ classIndex);
    if (currentclass == undefined){
        console.log("Oh no! This is an error. :(");
    }
    let wepvals = [];
    weps.forEach(function(element) {
        wepvals.push(parseInt(element));
    });
    console.log(wepcaps);
    let update = {
        SwordU: 0,
        LanceU: 0,
        AxeU: 0,
        BowU: 0,
        DaggerU: 0,
        GunU: 0,
        AnimaU: 0,
        LightU: 0,
        DarkU: 0,
        StoneU: 0,
        StaffU: 0
    };
    const class_Weps = ["Sword", "Lance", "Axe", "Bow", "Dagger", "Gun", "Fire", "Wind", "Thunder", "Light", "Dark", "Stone", "Staff"];
    let i;
    let j = 0;
    for(i = 1; i <= 11; i++) {
        let index = wepvals.indexOf(i);
        if( index != -1 ) {
            let prefix = class_Weps[i-1];
            update[prefix+"U"] = 1;
            update[prefix+"rank_max"] = wepcaps[j];
            console.log(wepcaps[j]);
            j++;
        }
    }
    console.log(update)
    setAttrs(update)

});
//racial fills!
on("change:Species", function(eventinfo) {
    let currentrace = eventinfo.newValue;
    if (r_names.indexOf(currentrace) != -1){
        raceIndex = r_names.indexOf(currentrace);
        setAttrs({
          HP_rg: r_HP_g[raceIndex],
          Str_rg: r_Str_g[raceIndex],
          Mag_rg: r_Mag_g[raceIndex],
          Skl_rg: r_Skl_g[raceIndex],
          Spd_rg: r_Spd_g[raceIndex],
          Lck_rg: r_Lck_g[raceIndex],
          Def_rg: r_Def_g[raceIndex],
          Res_rg: r_Res_g[raceIndex]

        });
    }
    console.log("Growths set for " +currentrace+"!");
});

//Base total scripts! Unfortunately, this isn't the end of the scripting, and the load times are just gonna get longer and longer. :(
on("change:HP_sf change:HP_i change:HP_bd", function(eventInfo) {
    getAttrs(["HP_sf", "HP_i","HP_bd","HP_total"], function(values) {
      setAttrs({
          HP_total: Number(values.HP_sf) + Number(values.HP_i) + Number(values.HP_bd),
          HP_current_max: Number(values.HP_sf) + Number(values.HP_i) + Number(values.HP_bd)
      });
   });
});
on("change:Str_sf change:Str_i change:Str_bd", function(eventInfo) {
    getAttrs(["Str_sf", "Str_i","Str_bd"], function(values) {
      setAttrs({
          Str_total: Number(values.Str_sf) + Number(values.Str_i) + Number(values.Str_bd)
      });
   });
});
on("change:Mag_sf change:Mag_i change:Mag_bd", function(eventInfo) {
    getAttrs(["Mag_sf", "Mag_i","Mag_bd"], function(values) {
      setAttrs({
          Mag_total: Number(values.Mag_sf) + Number(values.Mag_i) + Number(values.Mag_bd)
      });
   });
});
on("change:Skl_sf change:Skl_i change:Skl_bd", function(eventInfo) {
    getAttrs(["Skl_sf", "Skl_i","Skl_bd"], function(values) {
      setAttrs({
          Skl_total: Number(values.Skl_sf) + Number(values.Skl_i) + Number(values.Skl_bd)
      });
   });
});
on("change:Spd_sf change:Spd_i change:Spd_bd", function(eventInfo) {
    getAttrs(["Spd_sf", "Spd_i","Spd_bd"], function(values) {
      setAttrs({
          Spd_total: Number(values.Spd_sf) + Number(values.Spd_i) + Number(values.Spd_bd)
      });
   });
});
on("change:Lck_sf change:Lck_i change:Lck_bd", function(eventInfo) {
    getAttrs(["Lck_sf", "Lck_i","Lck_bd"], function(values) {
      setAttrs({
          Lck_total: Number(values.Lck_sf) + Number(values.Lck_i) + Number(values.Lck_bd)
      });
   });
});
on("change:Def_sf change:Def_i change:Def_bd", function(eventInfo) {
    getAttrs(["Def_sf", "Def_i","Def_bd"], function(values) {
      setAttrs({
          Def_total: Number(values.Def_sf) + Number(values.Def_i) + Number(values.Def_bd)
      });
   });
});
on("change:Res_sf change:Res_i change:Res_bd", function(eventInfo) {
    getAttrs(["Res_sf", "Res_i","Res_bd"], function(values) {
      setAttrs({
          Res_total: Number(values.Res_sf) + Number(values.Res_i) + Number(values.Res_bd)
      });
   });
});
on("change:Mov_sf change:Mov_i change:Mov_bd", function(eventInfo) {
    getAttrs(["Mov_sf", "Mov_i","Mov_bd"], function(values) {
      setAttrs({
          Mov_total: Number(values.Mov_sf) + Number(values.Mov_i) + Number(values.Mov_bd)
      });
   });
});

//Growth totals!
on("change:HP_rg change:HP_gf change:HP_gi", function(eventInfo) {
    getAttrs(["HP_rg", "HP_gf","HP_gi"], function(values) {
      setAttrs({
          HP_gtotal: Number(values.HP_rg) + Number(values.HP_gf) + Number(values.HP_gi)
      });
   });
});
on("change:Str_rg change:Str_gf change:Str_gi", function(eventInfo) {
    getAttrs(["Str_rg", "Str_gf","Str_gi"], function(values) {
      setAttrs({
          Str_gtotal: Number(values.Str_rg) + Number(values.Str_gf) + Number(values.Str_gi)
      });
   });
});
on("change:Mag_rg change:Mag_gf change:Mag_gi", function(eventInfo) {
    getAttrs(["Mag_rg", "Mag_gf","Mag_gi"], function(values) {
      setAttrs({
          Mag_gtotal: Number(values.Mag_rg) + Number(values.Mag_gf) + Number(values.Mag_gi)
      });
   });
});
on("change:Skl_rg change:Skl_gf change:Skl_gi", function(eventInfo) {
    getAttrs(["Skl_rg", "Skl_gf","Skl_gi"], function(values) {
      setAttrs({
          Skl_gtotal: Number(values.Skl_rg) + Number(values.Skl_gf) + Number(values.Skl_gi)
      });
   });
});
on("change:Spd_rg change:Spd_gf change:Spd_gi", function(eventInfo) {
    getAttrs(["Spd_rg", "Spd_gf","Spd_gi"], function(values) {
      setAttrs({
          Spd_gtotal: Number(values.Spd_rg) + Number(values.Spd_gf) + Number(values.Spd_gi)
      });
   });
});
on("change:Lck_rg change:Lck_gf change:Lck_gi", function(eventInfo) {
    getAttrs(["Lck_rg", "Lck_gf","Lck_gi"], function(values) {
      setAttrs({
          Lck_gtotal: Number(values.Lck_rg) + Number(values.Lck_gf) + Number(values.Lck_gi)
      });
   });
});
on("change:Def_rg change:Def_gf change:Def_gi", function(eventInfo) {
    getAttrs(["Def_rg", "Def_gf","Def_gi"], function(values) {
      setAttrs({
          Def_gtotal: Number(values.Def_rg) + Number(values.Def_gf) + Number(values.Def_gi)
      });
   });
});
on("change:Res_rg change:Res_gf change:Res_gi", function(eventInfo) {
    getAttrs(["Res_rg", "Res_gf","Res_gi"], function(values) {
      setAttrs({
          Res_gtotal: Number(values.Res_rg) + Number(values.Res_gf) + Number(values.Res_gi)
      });
   });
});

//Even more scripting! For skill checks this time. :(
on("change:Athletics_check change:str_total change:Lck_total",function(eventInfo){
    getAttrs(["Athletics_check","Str_total","Lck_total"], function(values){
        let skillbonus = 0;
        if (values.Athletics_check == "on"){
            skillbonus = 5;
        }
        setAttrs({
          Athletics_total: Math.round(((values.Str_total + values.Lck_total)/2)/2 + skillbonus)
      });
    });
});
on("change:Arcana_check change:Mag_total change:Lck_total",function(eventInfo){
    getAttrs(["Arcana_check","Mag_total","Lck_total"], function(values){
        let skillbonus = 0;
        if (values.Arcana_check == "on"){
            skillbonus = 5;
        }
        setAttrs({
          Arcana_total: Math.round(((values.Mag_total + values.Lck_total)/2)/2 + skillbonus)
      });
    });
});
on("change:History_check change:Mag_total change:Lck_total",function(eventInfo){
    getAttrs(["History_check","Mag_total","Lck_total"], function(values){
        let skillbonus = 0;
        if (values.History_check == "on"){
            skillbonus = 5;
        }
        setAttrs({
          History_total: Math.round(((values.Mag_total + values.Lck_total)/2)/2 + skillbonus)
      });
    });
});
on("change:Investigation_check change:Mag_total change:Lck_total",function(eventInfo){
    getAttrs(["Investigation_check","Mag_total","Lck_total"], function(values){
        let skillbonus = 0;
        if (values.Investigation_check == "on"){
            skillbonus = 5;
        }
        setAttrs({
          Investigation_total: Math.round(((values.Mag_total + values.Lck_total)/2)/2 + skillbonus)
      });
    });
});
on("change:Nature_check change:Mag_total change:Lck_total",function(eventInfo){
    getAttrs(["Nature_check","Mag_total","Lck_total"], function(values){
        let skillbonus = 0;
        if (values.Nature_check == "on"){
            skillbonus = 5;
        }
        setAttrs({
          Nature_total: Math.round(((values.Mag_total + values.Lck_total)/2)/2 + skillbonus)
      });
    });
});
on("change:Religion_check change:Mag_total change:Lck_total",function(eventInfo){
    getAttrs(["Religion_check","Mag_total","Lck_total"], function(values){
        let skillbonus = 0;
        if (values.Religion_check == "on"){
            skillbonus = 5;
        }
        setAttrs({
          Religion_total: Math.round(((values.Mag_total + values.Lck_total)/2)/2 + skillbonus)
      });
    });
});
on("change:Deception_check change:Skl_total change:Lck_total",function(eventInfo){
    getAttrs(["Deception_check","Skl_total","Lck_total"], function(values){
        let skillbonus = 0;
        if (values.Deception_check == "on"){
            skillbonus = 5;
        }
        setAttrs({
          Deception_total: Math.round(((values.Skl_total + values.Lck_total)/2)/2 + skillbonus)
      });
    });
});
on("change:Intimidation_check change:Skl_total change:Lck_total",function(eventInfo){
    getAttrs(["Intimidation_check","Skl_total","Lck_total"], function(values){
        let skillbonus = 0;
        if (values.Intimidation_check == "on"){
            skillbonus = 5;
        }
        setAttrs({
          Intimidation_total: Math.round(((values.Skl_total + values.Lck_total)/2)/2 + skillbonus)
      });
    });
});
on("change:Performance_check change:Skl_total change:Lck_total",function(eventInfo){
    getAttrs(["Performance_check","Skl_total","Lck_total"], function(values){
        let skillbonus = 0;
        if (values.Performance_check == "on"){
            skillbonus = 5;
        }
        setAttrs({
          Performance_total: Math.round(((values.Skl_total + values.Lck_total)/2)/2 + skillbonus)
      });
    });
});
on("change:Persuasion_check change:Skl_total change:Lck_total",function(eventInfo){
    getAttrs(["Persuasion_check","Skl_total","Lck_total"], function(values){
        let skillbonus = 0;
        if (values.Persuasion_check == "on"){
            skillbonus = 5;
        }
        setAttrs({
          Persuasion_total: Math.round(((values.Skl_total + values.Lck_total)/2)/2 + skillbonus)
      });
    });
});
on("change:Acrobatics_check change:Spd_total change:Lck_total",function(eventInfo){
    getAttrs(["Acrobatics_check","Spd_total","Lck_total"], function(values){
        let skillbonus = 0;
        if (values.Acrobatics_check == "on"){
            skillbonus = 5;
        }
        setAttrs({
          Acrobatics_total: Math.round(((values.Spd_total + values.Lck_total)/2)/2 + skillbonus)
      });
    });
});
on("change:SleightofHand_check change:Spd_total change:Lck_total",function(eventInfo){
    getAttrs(["SleightofHand_check","Spd_total","Lck_total"], function(values){
        let skillbonus = 0;
        if (values.SleightofHand_check == "on"){
            skillbonus = 5;
        }
        setAttrs({
          SleightofHand_total: Math.round(((values.Spd_total + values.Lck_total)/2)/2 + skillbonus)
      });
    });
});
on("change:Stealth_check change:Spd_total change:Lck_total",function(eventInfo){
    getAttrs(["Stealth_check","Spd_total","Lck_total"], function(values){
        let skillbonus = 0;
        if (values.Stealth_check == "on"){
            skillbonus = 5;
        }
        setAttrs({
          Stealth_total: Math.round(((values.Spd_total + values.Lck_total)/2)/2 + skillbonus)
      });
    });
});
on("change:AnimalHandling_check change:Res_total change:Lck_total",function(eventInfo){
    getAttrs(["AnimalHandling_check","Res_total","Lck_total"], function(values){
        let skillbonus = 0;
        if (values.AnimalHandling_check == "on"){
            skillbonus = 5;
        }
        setAttrs({
          AnimalHandling_total: Math.round(((values.Res_total + values.Lck_total)/2)/2 + skillbonus)
      });
    });
});
on("change:Insight_check change:Res_total change:Lck_total",function(eventInfo){
    getAttrs(["Insight_check","Res_total","Lck_total"], function(values){
        let skillbonus = 0;
        if (values.Insight_check == "on"){
            skillbonus = 5;
        }
        setAttrs({
          Insight_total: Math.round(((values.Res_total + values.Lck_total)/2)/2 + skillbonus)
      });
    });
});
on("change:Medicine_check change:Res_total change:Lck_total",function(eventInfo){
    getAttrs(["Medicine_check","Res_total","Lck_total"], function(values){
        let skillbonus = 0;
        if (values.Medicine_check == "on"){
            skillbonus = 5;
        }
        setAttrs({
          Medicine_total: Math.round(((values.Res_total + values.Lck_total)/2)/2 + skillbonus)
      });
    });
});
on("change:Perception_check change:Res_total change:Lck_total",function(eventInfo){
    getAttrs(["Perception_check","Res_total","Lck_total"], function(values){
        let skillbonus = 0;
        if (values.Perception_check == "on"){
            skillbonus = 5;
        }
        setAttrs({
          Perception_total: Math.round(((values.Res_total + values.Lck_total)/2)/2 + skillbonus)
      });
    });
});
on("change:Survival_check change:Res_total change:Lck_total",function(eventInfo){
    getAttrs(["Survival_check","Res_total","Lck_total"], function(values){
        let skillbonus = 0;
        if (values.Survival_check == "on"){
            skillbonus = 5;
        }
        setAttrs({
          Survival_total: Math.round(((values.Res_total + values.Lck_total)/2)/2 + skillbonus)
      });
    });
});

//Weapon ranks!
on("change:SwordEXP", function(eventInfo) {
    currEXP = eventInfo.newValue;
    getAttrs(["Swordrank_max"], function(values) {
        maxRank = values.Swordrank_max
    });
    Rank = "E";
    if (currEXP > 30){
        Rank = "D";
        if (currEXP > 70){
            Rank = "C";
            if (currEXP > 120){
                Rank = "B";
                if ((currEXP > 180) && (maxRank != "B")){
                    Rank = "A";
                    if ((currEXP > 250) && (maxRank == "S")){
                        Rank = "S";
                    }
                }
            }
        }
    }
    setAttrs({
          Swordrank: Rank
    });
});
on("change:LanceEXP", function(eventInfo) {
    currEXP = eventInfo.newValue;
    getAttrs(["Lancerank_max"], function(values) {
        maxRank = values.Lancerank_max
    });
    Rank = "E";
    if (currEXP > 30){
        Rank = "D";
        if (currEXP > 70){
            Rank = "C";
            if (currEXP > 120){
                Rank = "B";
                if ((currEXP > 180) && (maxRank != "B")){
                    Rank = "A";
                    if ((currEXP > 250) && (maxRank == "S")){
                        Rank = "S";
                    }
                }
            }
        }
    }
    setAttrs({
          Lancerank: Rank
    });
});
on("change:AxeEXP", function(eventInfo) {
    currEXP = eventInfo.newValue;
    getAttrs(["Axerank_max"], function(values) {
        maxRank = values.Axerank_max
    });
    Rank = "E";
    if (currEXP > 30){
        Rank = "D";
        if (currEXP > 70){
            Rank = "C";
            if (currEXP > 120){
                Rank = "B";
                if ((currEXP > 180) && (maxRank != "B")){
                    Rank = "A";
                    if ((currEXP > 250) && (maxRank == "S")){
                        Rank = "S";
                    }
                }
            }
        }
    }
    setAttrs({
          Axerank: Rank
    });
});
on("change:BowEXP", function(eventInfo) {
    currEXP = eventInfo.newValue;
    getAttrs(["Bowrank_max"], function(values) {
        maxRank = values.Bowrank_max
    });
    Rank = "E";
    if (currEXP > 30){
        Rank = "D";
        if (currEXP > 70){
            Rank = "C";
            if (currEXP > 120){
                Rank = "B";
                if ((currEXP > 180) && (maxRank != "B")){
                    Rank = "A";
                    if ((currEXP > 250) && (maxRank == "S")){
                        Rank = "S";
                    }
                }
            }
        }
    }
    setAttrs({
          Bowrank: Rank
    });
});
on("change:DaggerEXP", function(eventInfo) {
    currEXP = eventInfo.newValue;
    getAttrs(["Daggerrank_max"], function(values) {
        maxRank = values.Daggerrank_max
    });
    Rank = "E";
    if (currEXP > 30){
        Rank = "D";
        if (currEXP > 70){
            Rank = "C";
            if (currEXP > 120){
                Rank = "B";
                if ((currEXP > 180) && (maxRank != "B")){
                    Rank = "A";
                    if ((currEXP > 250) && (maxRank == "S")){
                        Rank = "S";
                    }
                }
            }
        }
    }
    setAttrs({
          Daggerrank: Rank
    });
});
on("change:GunEXP", function(eventInfo) {
    currEXP = eventInfo.newValue;
    getAttrs(["Gunrank_max"], function(values) {
        maxRank = values.Gunrank_max
    });
    Rank = "E";
    if (currEXP > 30){
        Rank = "D";
        if (currEXP > 70){
            Rank = "C";
            if (currEXP > 120){
                Rank = "B";
                if ((currEXP > 180) && (maxRank != "B")){
                    Rank = "A";
                    if ((currEXP > 250) && (maxRank == "S")){
                        Rank = "S";
                    }
                }
            }
        }
    }
    setAttrs({
          Gunrank: Rank
    });
});
on("change:DarkEXP", function(eventInfo) {
    currEXP = eventInfo.newValue;
    getAttrs(["Darkrank_max"], function(values) {
        maxRank = values.Darkrank_max
    });
    Rank = "E";
    if (currEXP > 30){
        Rank = "D";
        if (currEXP > 70){
            Rank = "C";
            if (currEXP > 120){
                Rank = "B";
                if ((currEXP > 180) && (maxRank != "B")){
                    Rank = "A";
                    if ((currEXP > 250) && (maxRank == "S")){
                        Rank = "S";
                    }
                }
            }
        }
    }
    setAttrs({
          Darkrank: Rank
    });
});
on("change:LightEXP", function(eventInfo) {
    currEXP = eventInfo.newValue;
    getAttrs(["Lightrank_max"], function(values) {
        maxRank = values.Lightrank_max
    });
    Rank = "E";
    if (currEXP > 30){
        Rank = "D";
        if (currEXP > 70){
            Rank = "C";
            if (currEXP > 120){
                Rank = "B";
                if ((currEXP > 180) && (maxRank != "B")){
                    Rank = "A";
                    if ((currEXP > 250) && (maxRank == "S")){
                        Rank = "S";
                    }
                }
            }
        }
    }
    setAttrs({
          Lightrank: Rank
    });
});
on("change:AnimaEXP", function(eventInfo) {
    currEXP = eventInfo.newValue;
    getAttrs(["Animarank_max"], function(values) {
        maxRank = values.Animarank_max
    });
    Rank = "E";
    if (currEXP > 30){
        Rank = "D";
        if (currEXP > 70){
            Rank = "C";
            if (currEXP > 120){
                Rank = "B";
                if ((currEXP > 180) && (maxRank != "B")){
                    Rank = "A";
                    if ((currEXP > 250) && (maxRank == "S")){
                        Rank = "S";
                    }
                }
            }
        }
    }
    setAttrs({
          Animarank: Rank
    });
});
on("change:StoneEXP", function(eventInfo) {
    currEXP = eventInfo.newValue;
    getAttrs(["Stonerank_max"], function(values) {
        maxRank = values.Stonerank_max
    });
    Rank = "E";
    if (currEXP > 30){
        Rank = "D";
        if (currEXP > 70){
            Rank = "C";
            if (currEXP > 120){
                Rank = "B";
                if ((currEXP > 180) && (maxRank != "B")){
                    Rank = "A";
                    if ((currEXP > 250) && (maxRank == "S")){
                        Rank = "S";
                    }
                }
            }
        }
    }
    setAttrs({
          Stonerank: Rank
    });
});
on("change:StaffEXP", function(eventInfo) {
    currEXP = eventInfo.newValue;
    getAttrs(["Staffrank_max"], function(values) {
        maxRank = values.Staffrank_max
    });
    Rank = "E";
    if (currEXP > 30){
        Rank = "D";
        if (currEXP > 70){
            Rank = "C";
            if (currEXP > 120){
                Rank = "B";
                if ((currEXP > 180) && (maxRank != "B")){
                    Rank = "A";
                    if ((currEXP > 250) && (maxRank == "S")){
                        Rank = "S";
                    }
                }
            }
        }
    }
    setAttrs({
          Staffrank: Rank
    });
});

//Statcap checking
on("change:HP_total",function(eventInfo){
    getAttrs(["HP_total","HP_total_max"], function(values){
        if (values.HP_total > values.HP_total_max){
            setAttrs({
                HP_total: values.HP_total_max
            });
        }
    });
});
on("change:HP_current",function(eventInfo){
    getAttrs(["HP_current","HP_current_max"], function(values){
        if (values.HP_current > values.HP_current_max){
            setAttrs({
                HP_current: values.HP_current_max
            });
        }
    });
});
on("change:Str_total",function(eventInfo){
    getAttrs(["Str_total","Str_total_max"], function(values){
        if (values.Str_total > values.Str_total_max){
            setAttrs({
                Str_total: values.Str_total_max
            });
        }
    });
});
on("change:Mag_total",function(eventInfo){
    getAttrs(["Mag_total","Mag_total_max"], function(values){
        if (values.Mag_total > values.Mag_total_max){
            setAttrs({
                Mag_total: values.Mag_total_max
            });
        }
    });
});
on("change:Skl_total",function(eventInfo){
    getAttrs(["Skl_total","Skl_total_max"], function(values){
        if (values.Skl_total > values.Skl_total_max){
            setAttrs({
                Skl_total: values.Skl_total_max
            });
        }
    });
});
on("change:Spd_total",function(eventInfo){
    getAttrs(["Spd_total","Spd_total_max"], function(values){
        if (values.Spd_total > values.Spd_total_max){
            setAttrs({
                Spd_total: values.Spd_total_max
            });
        }
    });
});
on("change:Lck_total",function(eventInfo){
    getAttrs(["Lck_total","Lck_total_max"], function(values){
        if (values.Lck_total > values.Lck_total_max){
            setAttrs({
                Lck_total: values.Lck_total_max
            });
        }
    });
});
on("change:Def_total",function(eventInfo){
    getAttrs(["Def_total","Def_total_max"], function(values){
        if (values.Def_total > values.Def_total_max){
            setAttrs({
                Def_total: values.Def_total_max
            });
        }
    });
});
on("change:Res_total",function(eventInfo){
    getAttrs(["Res_total","Res_total_max"], function(values){
        if (values.Res_total > values.Res_total_max){
            setAttrs({
                Res_total: values.Res_total_max
            });
        }
    });
});
on("change:Mov_total",function(eventInfo){
    getAttrs(["Mov_total","Mov_total_max"], function(values){
        if (values.Mov_total > values.Mov_total_max){
            setAttrs({
                Mov_total: values.Mov_total_max
            });
        }
    });
});

//Hit
on("change:Skl_total change:Lck_total change:Hitmod change:repeating_weapons:Hit change:_reporder_repeating_weapons remove:repeating_weapons", function(eventInfo) {
   getSectionIDsOrdered("repeating_weapons", function(idarray) {
       fID = idarray[0];
       log(eventInfo.newValue)
       getAttrs(["Skl_total","Lck_total","Hitmod","repeating_weapons_"+fID+"_hit","repeating_weapons_$0_hit"], function(v) {
           log(JSON.stringify(v))
           let wHit = parseInt(v["repeating_weapons_"+fID+"_hit"])||0;
           log("wHit is " + wHit)
           let Skl = v.Skl_total;
           let Lck = v.Lck_total;
           let Mod = v.Hitmod
           setAttrs({
               Hit: Math.round((Skl * 3) + wHit + (Lck / 2)) + Number(Mod)
           });
           console.log(Math.round((Skl * 3) + wHit + (Lck / 2)));
           console.log("Hitmod is" + Mod)
       });
   });
});

//Crit
on("change:Skl_total change:Critmod change:repeating_weapons:Crit change:_reporder_repeating_weapons remove:repeating_weapons", function() {
   getSectionIDsOrdered("repeating_weapons", function(idarray) {
       fID = idarray[0];
       getAttrs(["Skl_total","Critmod","repeating_weapons_"+fID+"_crit"], function(v) {
           let wCrit = parseInt(v["repeating_weapons_"+fID+"_crit"])||0;
           let SklC = v.Skl_total;
           setAttrs({
               Crit: Math.round((SklC / 2) + wCrit) + Number(v.Critmod)
           });
           console.log(Math.round((SklC / 2) + wCrit));
       });
   });
});
//Avo
on("change:Spd_total change:Lck_total", function() {
   getAttrs(["Spd_total", "Lck_total","Avomod"], function(v) {
       Spd = v.Spd_total;
       LckA = v.Lck_total;
      setAttrs({
          Avo: Math.round(((Spd * 3) + LckA) / 2) + Number(v.Avomod)
      });
   });
});
//Dodge
on("change:Lck_total change:Ddgmod", function() {
   getAttrs(["Lck_total", "Avomod"], function(v) {
       Lck = v.Lck_total;
      setAttrs({
          Ddg: Number(Lck) + Number(v.Avomod)
      });
   });
});
//Weapon # limits
on("change:repeating_weapons", function() {
   getSectionIDsOrdered("repeating_weapons", function(idarray) {
       if (idarray.length > 5){
           cl = idarray.length - 1;
           removeRepeatingRow("repeating_weapons_" + idarray[cl]);
       }
   });
});
//Other firstmost values for the battlescript
on("change:repeating_weapons change:_reporder_repeating_weapons remove:repeating_weapons", function(eventInfo) {
    log(eventInfo.newValue)
    getSectionIDsOrdered("repeating_weapons", function(idarray) {
       console.log(idarray);
       if (idarray.length < 1){
           console.log("No weapon! Filling in default values");
           update = {
               fid: undefined
           };
           console.log(update);
           setAttrs(update);
           return;
       } else {
           fID = idarray[0];
           update = {
               fid: fID
           }
           console.log(fID)
           setAttrs(update);
       };
    });
});

on("change:Species change:Class", function(eventInfo) {
    setAttrs({
        Weaknesses: ""
    });
    let weaklist = [];
    getAttrs(["Species","Class"], function(v){
        //Armor
        if ((v.Class === "Knight")||(v.Class === "Great Knight")||(v.Class === "General")){
            weaklist.push("Armor");
        }
        //Dragon
        if ((v.Class == "Wyvern Rider")||(v.Class == "Wyvern Lord")||(v.Class == "Revenant Knight")|| (v.Species == "Manakete")||(v.Species == "Half-Manakete")){
            weaklist.push("Dragon");
        }
        //Beast
        if ((v.Class == "Cavalier")||(v.Class == "Troubadour")||(v.Class == "Pegasus Knight")||(v.Class == "Griffin Rider")||(v.Class == "Paladin")||(v.Class == "Great Knight")||(v.Class == "Falcon Knight")||(v.Class == "Dark Flier")||(v.Class == "Griffin Lord")||(v.Class == "Light Flier")||(v.Class == "Bow Knight")||(v.Class == "Dark Knight")||(v.Class == "Valkyrie")||(v.Species == "Kitsune")||(v.Species == "Half-Kitsune")||(v.Species == "Wolfskin")||(v.Species == "Half-Wolfskin")||(v.Species == "Laguz")||(v.Species == "Half-Laguz")){
            weaklist.push("Beast");
        }
        //Flier
        if ((v.Class == "Pegasus Knight")||(v.Class == "Griffin Rider")||(v.Class == "Wyvern Rider")||(v.Class == "Falcon Knight")||(v.Class == "Dark Flier")||(v.Class == "Griffin Lord")||(v.Class == "Light Flier")||(v.Class == "Wyvern Lord")||(v.Class == "Revenant Knight")){
            weaklist.push("Flier");
        }
        //monster
        if((v.Species == "Monster")){
            weaklist.push("Monster");
        }
        if((v.Species == "Construct")){
            weaklist.push("Construct")
        }
        setAttrs({
            Weaknesses: weaklist.join(", ")
        });
    });
});

//Initialize values for API, because ded
on("sheet:opened", function(){
    getAttrs(["EXP","SwordEXP","LanceEXP","AxeEXP","BowEXP","DaggerEXP","GunEXP","AnimaEXP","DarkEXP","LightEXP","StoneEXP","StaffEXP","Level","HP_i","Str_i","Mag_i","Skl_i","Spd_i","Lck_i","Def_i","Res_i","Mov_i","HP_bd","Str_bd","Mag_bd","Skl_bd","Spd_bd","Lck_bd","Def_bd","Res_bd","Mov_bd","item_uses0","item_uses1","item_uses2","Swordrank","Lancerank","Axerank","Bowrank","Daggerrank","Gunrank","Animarank","Lightrank","Darkrank","Staffrank","Stonerank","Hitmod","Critmod","Avomod","Ddgmod","Dmgmod","Hitmod_class","Critmod_class","Avomod_class","Ddgmod_class","fid"], function(v){
        setAttrs({
            EXP: v.EXP,
            SwordEXP: v.SwordEXP,
            LanceEXP: v.LanceEXP,
            AxeEXP: v.AxeEXP,
            BowEXP: v.BowEXP,
            DaggerEXP: v.DaggerEXP,
            GunEXP: v.GunEXP,
            AnimaEXP: v.AnimaEXP,
            DarkEXP: v.DarkEXP,
            LightEXP: v.LightEXP,
            StoneEXP: v.StoneEXP,
            StaffEXP: v.StaffEXP,
            Swordrank: v.Swordrank,
            Lancerank: v.Lancerank,
            Axerank: v.Axerank,
            Bowrank: v.Bowrank,
            Daggerrank: v.Daggerrank,
            Gunrank: v.Gunrank,
            Animarank: v.Animarank,
            Darkrank: v.Darkrank,
            Lightrank: v.Lightrank,
            Stonerank: v.Stonerank,
            Staffrank: v.Staffrank,
            Level: v.Level,
            HP_i: v.HP_i,
            Str_i: v.Str_i,
            Mag_i: v.Mag_i,
            Skl_i: v.Skl_i,
            Spd_i: v.Spd_i,
            Lck_i: v.Lck_i,
            Def_i: v.Def_i,
            Res_i: v.Res_i,
            Mov_i: v.Mov_i,
            HP_bd: v.HP_bd,
            Str_bd: v.Str_bd,
            Mag_bd: v.Mag_bd,
            Skl_bd: v.Skl_bd,
            Spd_bd: v.Spd_bd,
            Lck_bd: v.Lck_bd,
            Def_bd: v.Def_bd,
            Res_bd: v.Res_bd,
            Mov_bd: v.Mov_bd,
            item_uses0: v.item_uses0,
            item_uses1: v.item_uses1,
            item_uses2: v.item_uses2,
            Hitmod: v.Hitmod,
            Critmod: v.Critmod,
            Avomod: v.Avomod,
            Ddgmod: v.Ddgmod,
            Dmgmod: v.Dmgmod,
            fid: v.fid
        });
        console.log("Initializing values...")
    });
});
//Broken item script! Because of the way fists are handled, they should never be able to reach zero, so I think it'll be ok
on("change:repeating_weapons:uses", function(eventInfo) {
    console.log(eventInfo.newValue);
    if (eventInfo.newValue === "0"){
        console.log("Broken");
        getAttrs(["repeating_weapons_WName"], function(v){
            setAttrs({
                "repeating_weapons_WRank": "UU",
                "repeating_weapons_WName": "Broken " + v["repeating_weapons_WName"]
            });
        });
    }
});
</script>

</html>
